{"mappings":"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","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-4d4c9339a7e9b8e3.js","arapy-11labs.985998c4.js","<anon>","index.js","node_modules/@11labs/client/dist/lib.module.js","node_modules/@11labs/client/src/utils/audio.ts","node_modules/@11labs/client/src/utils/rawAudioProcessor.ts","node_modules/@11labs/client/src/utils/compatibility.ts","node_modules/@11labs/client/src/utils/input.ts","node_modules/@11labs/client/src/utils/audioConcatProcessor.ts","node_modules/@11labs/client/src/utils/output.ts","node_modules/@11labs/client/src/utils/events.ts","node_modules/@11labs/client/src/utils/connection.ts","node_modules/@11labs/client/src/index.ts","visualizer.js"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = null;var HMR_SERVER_PORT = 1234;var HMR_SECURE = false;var HMR_ENV_HASH = \"439701173a9199ea\";var HMR_USE_SSE = false;module.bundle.HMR_BUNDLE_ID = \"eda868fb33e29f00\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_SERVER_PORT, HMR_ENV_HASH, HMR_SECURE, HMR_USE_SSE, chrome, browser, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: {|[string]: mixed|};\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_SERVER_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var HMR_USE_SSE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData[moduleName],\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData[moduleName] = undefined;\n}\nmodule.bundle.Module = Module;\nmodule.bundle.hotData = {};\nvar checkedAssets /*: {|[string]: boolean|} */,\n  disposedAssets /*: {|[string]: boolean|} */,\n  assetsToDispose /*: Array<[ParcelRequire, string]> */,\n  assetsToAccept /*: Array<[ParcelRequire, string]> */,\n  bundleNotFound = false;\nfunction getHostname() {\n  return HMR_HOST || (typeof location !== 'undefined' && location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\nfunction getPort() {\n  return HMR_PORT || (typeof location !== 'undefined' ? location.port : HMR_SERVER_PORT);\n}\n\n// eslint-disable-next-line no-redeclare\nlet WebSocket = globalThis.WebSocket;\nif (!WebSocket && typeof module.bundle.root === 'function') {\n  try {\n    // eslint-disable-next-line no-global-assign\n    WebSocket = module.bundle.root('ws');\n  } catch {\n    // ignore.\n  }\n}\nvar hostname = getHostname();\nvar port = getPort();\nvar protocol = HMR_SECURE || typeof location !== 'undefined' && location.protocol === 'https:' && !['localhost', '127.0.0.1', '0.0.0.0'].includes(hostname) ? 'wss' : 'ws';\n\n// eslint-disable-next-line no-redeclare\nvar parent = module.bundle.parent;\nif (!parent || !parent.isParcelRequire) {\n  // Web extension context\n  var extCtx = typeof browser === 'undefined' ? typeof chrome === 'undefined' ? null : chrome : browser;\n\n  // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n  var supportsSourceURL = false;\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  }\n  var ws;\n  if (HMR_USE_SSE) {\n    ws = new EventSource('/__parcel_hmr');\n  } else {\n    try {\n      // If we're running in the dev server's node runner, listen for messages on the parent port.\n      let {\n        workerData,\n        parentPort\n      } = module.bundle.root('node:worker_threads') /*: any*/;\n      if (workerData !== null && workerData !== void 0 && workerData.__parcel) {\n        parentPort.on('message', async message => {\n          try {\n            await handleMessage(message);\n            parentPort.postMessage('updated');\n          } catch {\n            parentPort.postMessage('restart');\n          }\n        });\n\n        // After the bundle has finished running, notify the dev server that the HMR update is complete.\n        queueMicrotask(() => parentPort.postMessage('ready'));\n      }\n    } catch {\n      if (typeof WebSocket !== 'undefined') {\n        try {\n          ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/');\n        } catch (err) {\n          // Ignore cloudflare workers error.\n          if (err.message && !err.message.includes('Disallowed operation called within global scope')) {\n            console.error(err.message);\n          }\n        }\n      }\n    }\n  }\n  if (ws) {\n    // $FlowFixMe\n    ws.onmessage = async function (event /*: {data: string, ...} */) {\n      var data /*: HMRMessage */ = JSON.parse(event.data);\n      await handleMessage(data);\n    };\n    if (ws instanceof WebSocket) {\n      ws.onerror = function (e) {\n        if (e.message) {\n          console.error(e.message);\n        }\n      };\n      ws.onclose = function () {\n        console.warn('[parcel] ðŸš¨ Connection to the HMR server was lost');\n      };\n    }\n  }\n}\nasync function handleMessage(data /*: HMRMessage */) {\n  checkedAssets = {} /*: {|[string]: boolean|} */;\n  disposedAssets = {} /*: {|[string]: boolean|} */;\n  assetsToAccept = [];\n  assetsToDispose = [];\n  bundleNotFound = false;\n  if (data.type === 'reload') {\n    fullReload();\n  } else if (data.type === 'update') {\n    // Remove error overlay if there is one\n    if (typeof document !== 'undefined') {\n      removeErrorOverlay();\n    }\n    let assets = data.assets;\n\n    // Handle HMR Update\n    let handled = assets.every(asset => {\n      return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n    });\n\n    // Dispatch a custom event in case a bundle was not found. This might mean\n    // an asset on the server changed and we should reload the page. This event\n    // gives the client an opportunity to refresh without losing state\n    // (e.g. via React Server Components). If e.preventDefault() is not called,\n    // we will trigger a full page reload.\n    if (handled && bundleNotFound && assets.some(a => a.envHash !== HMR_ENV_HASH) && typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n      handled = !window.dispatchEvent(new CustomEvent('parcelhmrreload', {\n        cancelable: true\n      }));\n    }\n    if (handled) {\n      console.clear();\n\n      // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n      if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n        window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n      }\n      await hmrApplyUpdates(assets);\n      hmrDisposeQueue();\n\n      // Run accept callbacks. This will also re-execute other disposed assets in topological order.\n      let processedAssets = {};\n      for (let i = 0; i < assetsToAccept.length; i++) {\n        let id = assetsToAccept[i][1];\n        if (!processedAssets[id]) {\n          hmrAccept(assetsToAccept[i][0], id);\n          processedAssets[id] = true;\n        }\n      }\n    } else fullReload();\n  }\n  if (data.type === 'error') {\n    // Log parcel errors to console\n    for (let ansiDiagnostic of data.diagnostics.ansi) {\n      let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n      console.error('ðŸš¨ [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n    }\n    if (typeof document !== 'undefined') {\n      // Render the fancy html overlay\n      removeErrorOverlay();\n      var overlay = createErrorOverlay(data.diagnostics.html);\n      // $FlowFixMe\n      document.body.appendChild(overlay);\n    }\n  }\n}\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel] âœ¨ Error resolved');\n  }\n}\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"${protocol === 'wss' ? 'https' : 'http'}://${hostname}:${port}/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n          ðŸš¨ ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div>ðŸ’¡ ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div>ðŸ“ <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\nfunction fullReload() {\n  if (typeof location !== 'undefined' && 'reload' in location) {\n    location.reload();\n  } else if (typeof extCtx !== 'undefined' && extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  } else {\n    try {\n      let {\n        workerData,\n        parentPort\n      } = module.bundle.root('node:worker_threads') /*: any*/;\n      if (workerData !== null && workerData !== void 0 && workerData.__parcel) {\n        parentPort.postMessage('restart');\n      }\n    } catch (err) {\n      console.error('[parcel] âš ï¸ An HMR update was not accepted. Please restart the process.');\n    }\n  }\n}\nfunction getParents(bundle, id) /*: Array<[ParcelRequire, string]> */{\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n  var parents = [];\n  var k, d, dep;\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n  return parents;\n}\nfunction updateLink(link) {\n  var href = link.getAttribute('href');\n  if (!href) {\n    return;\n  }\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n  newLink.setAttribute('href',\n  // $FlowFixMe\n  href.split('?')[0] + '?' + Date.now());\n  // $FlowFixMe\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout || typeof document === 'undefined') {\n    return;\n  }\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href /*: string */ = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n    cssTimeout = null;\n  }, 50);\n}\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n      return new Promise((resolve, reject) => {\n        var _document$head;\n        script.onload = () => resolve(script);\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 || _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension fix\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3 && typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n            extCtx.runtime.reload();\n            return;\n          }\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n          (_document$head2 = document.head) === null || _document$head2 === void 0 || _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\nfunction hmrApply(bundle /*: ParcelRequire */, asset /*:  HMRAsset */) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      }\n\n      // $FlowFixMe\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    }\n\n    // Always traverse to the parent bundle, even if we already replaced the asset in this bundle.\n    // This is required in case modules are duplicated. We need to ensure all instances have the updated code.\n    if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    }\n\n    // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n    delete modules[id];\n    delete bundle.cache[id];\n\n    // Now delete the orphans.\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\nfunction hmrAcceptCheck(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  checkedAssets = {};\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  }\n\n  // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else if (a !== null) {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n      parents.push(...p);\n    }\n  }\n  return accepted;\n}\nfunction hmrAcceptCheckOne(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      bundleNotFound = true;\n      return true;\n    }\n    return hmrAcceptCheckOne(bundle.parent, id, depsByBundle);\n  }\n  if (checkedAssets[id]) {\n    return null;\n  }\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  if (!cached) {\n    return true;\n  }\n  assetsToDispose.push([bundle, id]);\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    assetsToAccept.push([bundle, id]);\n    return true;\n  }\n  return false;\n}\nfunction hmrDisposeQueue() {\n  // Dispose all old assets.\n  for (let i = 0; i < assetsToDispose.length; i++) {\n    let id = assetsToDispose[i][1];\n    if (!disposedAssets[id]) {\n      hmrDispose(assetsToDispose[i][0], id);\n      disposedAssets[id] = true;\n    }\n  }\n  assetsToDispose = [];\n}\nfunction hmrDispose(bundle /*: ParcelRequire */, id /*: string */) {\n  var cached = bundle.cache[id];\n  bundle.hotData[id] = {};\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData[id];\n  }\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData[id]);\n    });\n  }\n  delete bundle.cache[id];\n}\nfunction hmrAccept(bundle /*: ParcelRequire */, id /*: string */) {\n  // Execute the module.\n  bundle(id);\n\n  // Run the accept callbacks in the new version of the module.\n  var cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    let assetsToAlsoAccept = [];\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      let additionalAssets = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n      if (Array.isArray(additionalAssets) && additionalAssets.length) {\n        assetsToAlsoAccept.push(...additionalAssets);\n      }\n    });\n    if (assetsToAlsoAccept.length) {\n      let handled = assetsToAlsoAccept.every(function (a) {\n        return hmrAcceptCheck(a[0], a[1]);\n      });\n      if (!handled) {\n        return fullReload();\n      }\n      hmrDisposeQueue();\n    }\n  }\n}",null,"// Importa o Conversation do pacote @11labs/client\nfunction $ee5c819c8591c8f0$var$e() {\n    return $ee5c819c8591c8f0$var$e = Object.assign ? Object.assign.bind() : function(e) {\n        for(var n = 1; n < arguments.length; n++){\n            var t = arguments[n];\n            for(var o in t)({}).hasOwnProperty.call(t, o) && (e[o] = t[o]);\n        }\n        return e;\n    }, $ee5c819c8591c8f0$var$e.apply(null, arguments);\n}\nfunction $ee5c819c8591c8f0$var$n(e) {\n    for(var n = window.atob(e), t = n.length, o = new Uint8Array(t), r = 0; r < t; r++)o[r] = n.charCodeAt(r);\n    return o.buffer;\n}\nvar $ee5c819c8591c8f0$var$t = new Blob([\n    '\\n      const BIAS = 0x84;\\n      const CLIP = 32635;\\n      const encodeTable = [\\n        0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,\\n        4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,\\n        5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,\\n        5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,\\n        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\\n        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\\n        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\\n        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7\\n      ];\\n      \\n      function encodeSample(sample) {\\n        let sign;\\n        let exponent;\\n        let mantissa;\\n        let muLawSample;\\n        sign = (sample >> 8) & 0x80;\\n        if (sign !== 0) sample = -sample;\\n        sample = sample + BIAS;\\n        if (sample > CLIP) sample = CLIP;\\n        exponent = encodeTable[(sample>>7) & 0xFF];\\n        mantissa = (sample >> (exponent+3)) & 0x0F;\\n        muLawSample = ~(sign | (exponent << 4) | mantissa);\\n        \\n        return muLawSample;\\n      }\\n    \\n      class RawAudioProcessor extends AudioWorkletProcessor {\\n        constructor() {\\n          super();\\n                    \\n          this.port.onmessage = ({ data }) => {\\n            switch (data.type) {\\n              case \"setFormat\":\\n                this.isMuted = false;\\n                this.buffer = []; // Initialize an empty buffer\\n                this.bufferSize = data.sampleRate / 4;\\n                this.format = data.format;\\n\\n                if (globalThis.LibSampleRate && sampleRate !== data.sampleRate) {\\n                  globalThis.LibSampleRate.create(1, sampleRate, data.sampleRate).then(resampler => {\\n                    this.resampler = resampler;\\n                  });\\n                }\\n                break;\\n              case \"setMuted\":\\n                this.isMuted = data.isMuted;\\n                break;\\n            }\\n          };\\n        }\\n        process(inputs) {\\n          if (!this.buffer) {\\n            return true;\\n          }\\n          \\n          const input = inputs[0]; // Get the first input node\\n          if (input.length > 0) {\\n            let channelData = input[0]; // Get the first channel\\'s data\\n\\n            // Resample the audio if necessary\\n            if (this.resampler) {\\n              channelData = this.resampler.full(channelData);\\n            }\\n\\n            // Add channel data to the buffer\\n            this.buffer.push(...channelData);\\n            // Get max volume \\n            let sum = 0.0;\\n            for (let i = 0; i < channelData.length; i++) {\\n              sum += channelData[i] * channelData[i];\\n            }\\n            const maxVolume = Math.sqrt(sum / channelData.length);\\n            // Check if buffer size has reached or exceeded the threshold\\n            if (this.buffer.length >= this.bufferSize) {\\n              const float32Array = this.isMuted \\n                ? new Float32Array(this.buffer.length)\\n                : new Float32Array(this.buffer);\\n\\n              let encodedArray = this.format === \"ulaw\"\\n                ? new Uint8Array(float32Array.length)\\n                : new Int16Array(float32Array.length);\\n\\n              // Iterate through the Float32Array and convert each sample to PCM16\\n              for (let i = 0; i < float32Array.length; i++) {\\n                // Clamp the value to the range [-1, 1]\\n                let sample = Math.max(-1, Math.min(1, float32Array[i]));\\n\\n                // Scale the sample to the range [-32768, 32767]\\n                let value = sample < 0 ? sample * 32768 : sample * 32767;\\n                if (this.format === \"ulaw\") {\\n                  value = encodeSample(Math.round(value));\\n                }\\n\\n                encodedArray[i] = value;\\n              }\\n\\n              // Send the buffered data to the main script\\n              this.port.postMessage([encodedArray, maxVolume]);\\n\\n              // Clear the buffer after sending\\n              this.buffer = [];\\n            }\\n          }\\n          return true; // Continue processing\\n        }\\n      }\\n      registerProcessor(\"raw-audio-processor\", RawAudioProcessor);\\n  '\n], {\n    type: \"application/javascript\"\n}), $ee5c819c8591c8f0$var$o = URL.createObjectURL($ee5c819c8591c8f0$var$t);\nfunction $ee5c819c8591c8f0$var$r() {\n    return [\n        \"iPad Simulator\",\n        \"iPhone Simulator\",\n        \"iPod Simulator\",\n        \"iPad\",\n        \"iPhone\",\n        \"iPod\"\n    ].includes(navigator.platform) || navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document;\n}\nvar $ee5c819c8591c8f0$var$i = /*#__PURE__*/ function() {\n    function e(e, n, t, o) {\n        this.context = void 0, this.analyser = void 0, this.worklet = void 0, this.inputStream = void 0, this.context = e, this.analyser = n, this.worklet = t, this.inputStream = o;\n    }\n    e.create = function(n) {\n        var t = n.sampleRate, i = n.format, a = n.preferHeadphonesForIosDevices;\n        try {\n            var s = null, u = null;\n            return Promise.resolve(function(n, c) {\n                try {\n                    var l = function() {\n                        function n() {\n                            function n() {\n                                return Promise.resolve(s.audioWorklet.addModule($ee5c819c8591c8f0$var$o)).then(function() {\n                                    return Promise.resolve(navigator.mediaDevices.getUserMedia({\n                                        audio: c\n                                    })).then(function(n) {\n                                        var o = s.createMediaStreamSource(u = n), r = new AudioWorkletNode(s, \"raw-audio-processor\");\n                                        return r.port.postMessage({\n                                            type: \"setFormat\",\n                                            format: i,\n                                            sampleRate: t\n                                        }), o.connect(a), a.connect(r), Promise.resolve(s.resume()).then(function() {\n                                            return new e(s, a, r, u);\n                                        });\n                                    });\n                                });\n                            }\n                            var r = navigator.mediaDevices.getSupportedConstraints().sampleRate, a = (s = new window.AudioContext(r ? {\n                                sampleRate: t\n                            } : {})).createAnalyser(), l = function() {\n                                if (!r) return Promise.resolve(s.audioWorklet.addModule(\"https://cdn.jsdelivr.net/npm/@alexanderolsen/libsamplerate-js@2.1.2/dist/libsamplerate.worklet.js\")).then(function() {});\n                            }();\n                            return l && l.then ? l.then(n) : n();\n                        }\n                        var c = {\n                            sampleRate: {\n                                ideal: t\n                            },\n                            echoCancellation: {\n                                ideal: !0\n                            },\n                            noiseSuppression: {\n                                ideal: !0\n                            }\n                        }, l = function() {\n                            if ($ee5c819c8591c8f0$var$r() && a) return Promise.resolve(window.navigator.mediaDevices.enumerateDevices()).then(function(e) {\n                                var n = e.find(function(e) {\n                                    return \"audioinput\" === e.kind && [\n                                        \"airpod\",\n                                        \"headphone\",\n                                        \"earphone\"\n                                    ].find(function(n) {\n                                        return e.label.toLowerCase().includes(n);\n                                    });\n                                });\n                                n && (c.deviceId = {\n                                    ideal: n.deviceId\n                                });\n                            });\n                        }();\n                        return l && l.then ? l.then(n) : n();\n                    }();\n                } catch (e) {\n                    return c(e);\n                }\n                return l && l.then ? l.then(void 0, c) : l;\n            }(0, function(e) {\n                var n, t;\n                throw null == (n = u) || n.getTracks().forEach(function(e) {\n                    return e.stop();\n                }), null == (t = s) || t.close(), e;\n            }));\n        } catch (e) {\n            return Promise.reject(e);\n        }\n    };\n    var n = e.prototype;\n    return n.close = function() {\n        try {\n            return this.inputStream.getTracks().forEach(function(e) {\n                return e.stop();\n            }), Promise.resolve(this.context.close()).then(function() {});\n        } catch (e) {\n            return Promise.reject(e);\n        }\n    }, n.setMuted = function(e) {\n        this.worklet.port.postMessage({\n            type: \"setMuted\",\n            isMuted: e\n        });\n    }, e;\n}(), $ee5c819c8591c8f0$var$a = new Blob([\n    '\\n      const decodeTable = [0,132,396,924,1980,4092,8316,16764];\\n      \\n      export function decodeSample(muLawSample) {\\n        let sign;\\n        let exponent;\\n        let mantissa;\\n        let sample;\\n        muLawSample = ~muLawSample;\\n        sign = (muLawSample & 0x80);\\n        exponent = (muLawSample >> 4) & 0x07;\\n        mantissa = muLawSample & 0x0F;\\n        sample = decodeTable[exponent] + (mantissa << (exponent+3));\\n        if (sign !== 0) sample = -sample;\\n\\n        return sample;\\n      }\\n      \\n      class AudioConcatProcessor extends AudioWorkletProcessor {\\n        constructor() {\\n          super();\\n          this.buffers = []; // Initialize an empty buffer\\n          this.cursor = 0;\\n          this.currentBuffer = null;\\n          this.wasInterrupted = false;\\n          this.finished = false;\\n          \\n          this.port.onmessage = ({ data }) => {\\n            switch (data.type) {\\n              case \"setFormat\":\\n                this.format = data.format;\\n                break;\\n              case \"buffer\":\\n                this.wasInterrupted = false;\\n                this.buffers.push(\\n                  this.format === \"ulaw\"\\n                    ? new Uint8Array(data.buffer)\\n                    : new Int16Array(data.buffer)\\n                );\\n                break;\\n              case \"interrupt\":\\n                this.wasInterrupted = true;\\n                break;\\n              case \"clearInterrupted\":\\n                if (this.wasInterrupted) {\\n                  this.wasInterrupted = false;\\n                  this.buffers = [];\\n                  this.currentBuffer = null;\\n                }\\n            }\\n          };\\n        }\\n        process(_, outputs) {\\n          let finished = false;\\n          const output = outputs[0][0];\\n          for (let i = 0; i < output.length; i++) {\\n            if (!this.currentBuffer) {\\n              if (this.buffers.length === 0) {\\n                finished = true;\\n                break;\\n              }\\n              this.currentBuffer = this.buffers.shift();\\n              this.cursor = 0;\\n            }\\n\\n            let value = this.currentBuffer[this.cursor];\\n            if (this.format === \"ulaw\") {\\n              value = decodeSample(value);\\n            }\\n            output[i] = value / 32768;\\n            this.cursor++;\\n\\n            if (this.cursor >= this.currentBuffer.length) {\\n              this.currentBuffer = null;\\n            }\\n          }\\n\\n          if (this.finished !== finished) {\\n            this.finished = finished;\\n            this.port.postMessage({ type: \"process\", finished });\\n          }\\n\\n          return true; // Continue processing\\n        }\\n      }\\n\\n      registerProcessor(\"audio-concat-processor\", AudioConcatProcessor);\\n    '\n], {\n    type: \"application/javascript\"\n}), $ee5c819c8591c8f0$var$s = URL.createObjectURL($ee5c819c8591c8f0$var$a), $ee5c819c8591c8f0$var$u = /*#__PURE__*/ function() {\n    function e(e, n, t, o) {\n        this.context = void 0, this.analyser = void 0, this.gain = void 0, this.worklet = void 0, this.context = e, this.analyser = n, this.gain = t, this.worklet = o;\n    }\n    return e.create = function(n) {\n        var t = n.sampleRate, o = n.format;\n        try {\n            var r = null;\n            return Promise.resolve(function(n, i) {\n                try {\n                    var a = (u = (r = new AudioContext({\n                        sampleRate: t\n                    })).createAnalyser(), (c = r.createGain()).connect(u), u.connect(r.destination), Promise.resolve(r.audioWorklet.addModule($ee5c819c8591c8f0$var$s)).then(function() {\n                        var n = new AudioWorkletNode(r, \"audio-concat-processor\");\n                        return n.port.postMessage({\n                            type: \"setFormat\",\n                            format: o\n                        }), n.connect(c), Promise.resolve(r.resume()).then(function() {\n                            return new e(r, u, c, n);\n                        });\n                    }));\n                } catch (e) {\n                    return i(e);\n                }\n                var u, c;\n                return a && a.then ? a.then(void 0, i) : a;\n            }(0, function(e) {\n                var n;\n                throw null == (n = r) || n.close(), e;\n            }));\n        } catch (e) {\n            return Promise.reject(e);\n        }\n    }, e.prototype.close = function() {\n        try {\n            return Promise.resolve(this.context.close()).then(function() {});\n        } catch (e) {\n            return Promise.reject(e);\n        }\n    }, e;\n}();\nfunction $ee5c819c8591c8f0$var$c(e) {\n    return !!e.type;\n}\nvar $ee5c819c8591c8f0$var$l = /*#__PURE__*/ function() {\n    function e(e, n, t, o) {\n        var r = this;\n        this.socket = void 0, this.conversationId = void 0, this.inputFormat = void 0, this.outputFormat = void 0, this.queue = [], this.disconnectionDetails = null, this.onDisconnectCallback = null, this.onMessageCallback = null, this.socket = e, this.conversationId = n, this.inputFormat = t, this.outputFormat = o, this.socket.addEventListener(\"error\", function(e) {\n            setTimeout(function() {\n                return r.disconnect({\n                    reason: \"error\",\n                    message: \"The connection was closed due to a socket error.\",\n                    context: e\n                });\n            }, 0);\n        }), this.socket.addEventListener(\"close\", function(e) {\n            r.disconnect(1e3 === e.code ? {\n                reason: \"agent\",\n                context: e\n            } : {\n                reason: \"error\",\n                message: e.reason || \"The connection was closed by the server.\",\n                context: e\n            });\n        }), this.socket.addEventListener(\"message\", function(e) {\n            try {\n                var n = JSON.parse(e.data);\n                if (!$ee5c819c8591c8f0$var$c(n)) return;\n                r.onMessageCallback ? r.onMessageCallback(n) : r.queue.push(n);\n            } catch (e) {}\n        });\n    }\n    e.create = function(n) {\n        try {\n            var t = null;\n            return Promise.resolve(function(o, r) {\n                try {\n                    var i = (s = null != (a = n.origin) ? a : \"wss://api.elevenlabs.io\", u = n.signedUrl ? n.signedUrl : s + \"/v1/convai/conversation?agent_id=\" + n.agentId, l = [\n                        \"convai\"\n                    ], n.authorization && l.push(\"bearer.\" + n.authorization), t = new WebSocket(u, l), Promise.resolve(new Promise(function(e, o) {\n                        t.addEventListener(\"open\", function() {\n                            var e, o, r, i, a, s = {\n                                type: \"conversation_initiation_client_data\"\n                            };\n                            n.overrides && (s.conversation_config_override = {\n                                agent: {\n                                    prompt: null == (o = n.overrides.agent) ? void 0 : o.prompt,\n                                    first_message: null == (r = n.overrides.agent) ? void 0 : r.firstMessage,\n                                    language: null == (i = n.overrides.agent) ? void 0 : i.language\n                                },\n                                tts: {\n                                    voice_id: null == (a = n.overrides.tts) ? void 0 : a.voiceId\n                                }\n                            }), n.customLlmExtraBody && (s.custom_llm_extra_body = n.customLlmExtraBody), n.dynamicVariables && (s.dynamic_variables = n.dynamicVariables), null == (e = t) || e.send(JSON.stringify(s));\n                        }, {\n                            once: !0\n                        }), t.addEventListener(\"error\", function(e) {\n                            setTimeout(function() {\n                                return o(e);\n                            }, 0);\n                        }), t.addEventListener(\"close\", o), t.addEventListener(\"message\", function(n) {\n                            var t = JSON.parse(n.data);\n                            $ee5c819c8591c8f0$var$c(t) && (\"conversation_initiation_metadata\" === t.type ? e(t.conversation_initiation_metadata_event) : console.warn(\"First received message is not conversation metadata.\"));\n                        }, {\n                            once: !0\n                        });\n                    })).then(function(n) {\n                        var o = n.conversation_id, r = n.agent_output_audio_format, i = n.user_input_audio_format, a = $ee5c819c8591c8f0$var$d(null != i ? i : \"pcm_16000\"), s = $ee5c819c8591c8f0$var$d(r);\n                        return new e(t, o, a, s);\n                    }));\n                } catch (e) {\n                    return r(e);\n                }\n                var a, s, u, l;\n                return i && i.then ? i.then(void 0, r) : i;\n            }(0, function(e) {\n                var n;\n                throw null == (n = t) || n.close(), e;\n            }));\n        } catch (e) {\n            return Promise.reject(e);\n        }\n    };\n    var n = e.prototype;\n    return n.close = function() {\n        this.socket.close();\n    }, n.sendMessage = function(e) {\n        this.socket.send(JSON.stringify(e));\n    }, n.onMessage = function(e) {\n        this.onMessageCallback = e, this.queue.forEach(e), this.queue = [];\n    }, n.onDisconnect = function(e) {\n        this.onDisconnectCallback = e, this.disconnectionDetails && e(this.disconnectionDetails);\n    }, n.disconnect = function(e) {\n        var n;\n        this.disconnectionDetails || (this.disconnectionDetails = e, null == (n = this.onDisconnectCallback) || n.call(this, e));\n    }, e;\n}();\nfunction $ee5c819c8591c8f0$var$d(e) {\n    var n = e.split(\"_\"), t = n[0], o = n[1];\n    if (![\n        \"pcm\",\n        \"ulaw\"\n    ].includes(t)) throw new Error(\"Invalid format: \" + e);\n    var r = parseInt(o);\n    if (isNaN(r)) throw new Error(\"Invalid sample rate: \" + o);\n    return {\n        format: t,\n        sampleRate: r\n    };\n}\nfunction $ee5c819c8591c8f0$var$h(e, n) {\n    try {\n        var t = e();\n    } catch (e) {\n        return n(e);\n    }\n    return t && t.then ? t.then(void 0, n) : t;\n}\nvar $ee5c819c8591c8f0$var$p = {\n    clientTools: {}\n}, $ee5c819c8591c8f0$var$f = {\n    onConnect: function() {},\n    onDebug: function() {},\n    onDisconnect: function() {},\n    onError: function() {},\n    onMessage: function() {},\n    onAudio: function() {},\n    onModeChange: function() {},\n    onStatusChange: function() {},\n    onCanSendFeedbackChange: function() {}\n}, $ee5c819c8591c8f0$export$8e86b22308382a1 = /*#__PURE__*/ function() {\n    function t(e, t, o, r, i) {\n        var a = this, s = this, u = this;\n        this.options = void 0, this.connection = void 0, this.input = void 0, this.output = void 0, this.wakeLock = void 0, this.lastInterruptTimestamp = 0, this.mode = \"listening\", this.status = \"connecting\", this.inputFrequencyData = void 0, this.outputFrequencyData = void 0, this.volume = 1, this.currentEventId = 1, this.lastFeedbackEventId = 1, this.canSendFeedback = !1, this.endSession = function() {\n            return u.endSessionWithDetails({\n                reason: \"user\"\n            });\n        }, this.endSessionWithDetails = function(e) {\n            try {\n                var n = function() {\n                    return a.connection.close(), Promise.resolve(a.input.close()).then(function() {\n                        return Promise.resolve(a.output.close()).then(function() {\n                            a.updateStatus(\"disconnected\"), a.options.onDisconnect(e);\n                        });\n                    });\n                };\n                if (\"connected\" !== a.status && \"connecting\" !== a.status) return Promise.resolve();\n                a.updateStatus(\"disconnecting\");\n                var t = $ee5c819c8591c8f0$var$h(function() {\n                    var e;\n                    return Promise.resolve(null == (e = a.wakeLock) ? void 0 : e.release()).then(function() {\n                        a.wakeLock = null;\n                    });\n                }, function() {});\n                return Promise.resolve(t && t.then ? t.then(n) : n());\n            } catch (e) {\n                return Promise.reject(e);\n            }\n        }, this.updateMode = function(e) {\n            e !== u.mode && (u.mode = e, u.options.onModeChange({\n                mode: e\n            }));\n        }, this.updateStatus = function(e) {\n            e !== u.status && (u.status = e, u.options.onStatusChange({\n                status: e\n            }));\n        }, this.updateCanSendFeedback = function() {\n            var e = u.currentEventId !== u.lastFeedbackEventId;\n            u.canSendFeedback !== e && (u.canSendFeedback = e, u.options.onCanSendFeedbackChange({\n                canSendFeedback: e\n            }));\n        }, this.onMessage = function(e) {\n            try {\n                switch(e.type){\n                    case \"interruption\":\n                        return e.interruption_event && (s.lastInterruptTimestamp = e.interruption_event.event_id), s.fadeOutAudio(), Promise.resolve();\n                    case \"agent_response\":\n                        return s.options.onMessage({\n                            source: \"ai\",\n                            message: e.agent_response_event.agent_response\n                        }), Promise.resolve();\n                    case \"user_transcript\":\n                        return s.options.onMessage({\n                            source: \"user\",\n                            message: e.user_transcription_event.user_transcript\n                        }), Promise.resolve();\n                    case \"internal_tentative_agent_response\":\n                        return s.options.onDebug({\n                            type: \"tentative_agent_response\",\n                            response: e.tentative_agent_response_internal_event.tentative_agent_response\n                        }), Promise.resolve();\n                    case \"client_tool_call\":\n                        return Promise.resolve(function() {\n                            if (s.options.clientTools.hasOwnProperty(e.client_tool_call.tool_name)) {\n                                var n = $ee5c819c8591c8f0$var$h(function() {\n                                    return Promise.resolve(s.options.clientTools[e.client_tool_call.tool_name](e.client_tool_call.parameters)).then(function(n) {\n                                        var t = \"object\" == typeof n ? JSON.stringify(n) : String(n);\n                                        s.connection.sendMessage({\n                                            type: \"client_tool_result\",\n                                            tool_call_id: e.client_tool_call.tool_call_id,\n                                            result: t,\n                                            is_error: !1\n                                        });\n                                    });\n                                }, function(n) {\n                                    s.onError(\"Client tool execution failed with following error: \" + (null == n ? void 0 : n.message), {\n                                        clientToolName: e.client_tool_call.tool_name\n                                    }), s.connection.sendMessage({\n                                        type: \"client_tool_result\",\n                                        tool_call_id: e.client_tool_call.tool_call_id,\n                                        result: \"Client tool execution failed: \" + (null == n ? void 0 : n.message),\n                                        is_error: !0\n                                    });\n                                });\n                                if (n && n.then) return n.then(function() {});\n                            } else {\n                                if (s.options.onUnhandledClientToolCall) return void s.options.onUnhandledClientToolCall(e.client_tool_call);\n                                s.onError(\"Client tool with name \" + e.client_tool_call.tool_name + \" is not defined on client\", {\n                                    clientToolName: e.client_tool_call.tool_name\n                                }), s.connection.sendMessage({\n                                    type: \"client_tool_result\",\n                                    tool_call_id: e.client_tool_call.tool_call_id,\n                                    result: \"Client tool with name \" + e.client_tool_call.tool_name + \" is not defined on client\",\n                                    is_error: !0\n                                });\n                            }\n                        }());\n                    case \"audio\":\n                        return s.lastInterruptTimestamp <= e.audio_event.event_id && (s.options.onAudio(e.audio_event.audio_base_64), s.addAudioBase64Chunk(e.audio_event.audio_base_64), s.currentEventId = e.audio_event.event_id, s.updateCanSendFeedback(), s.updateMode(\"speaking\")), Promise.resolve();\n                    case \"ping\":\n                        return s.connection.sendMessage({\n                            type: \"pong\",\n                            event_id: e.ping_event.event_id\n                        }), Promise.resolve();\n                    default:\n                        return s.options.onDebug(e), Promise.resolve();\n                }\n            } catch (e) {\n                return Promise.reject(e);\n            }\n        }, this.onInputWorkletMessage = function(e) {\n            var n, t;\n            \"connected\" === u.status && u.connection.sendMessage({\n                user_audio_chunk: (n = e.data[0].buffer, t = new Uint8Array(n), window.btoa(String.fromCharCode.apply(String, t)))\n            });\n        }, this.onOutputWorkletMessage = function(e) {\n            var n = e.data;\n            \"process\" === n.type && u.updateMode(n.finished ? \"listening\" : \"speaking\");\n        }, this.addAudioBase64Chunk = function(e) {\n            u.output.gain.gain.value = u.volume, u.output.worklet.port.postMessage({\n                type: \"clearInterrupted\"\n            }), u.output.worklet.port.postMessage({\n                type: \"buffer\",\n                buffer: $ee5c819c8591c8f0$var$n(e)\n            });\n        }, this.fadeOutAudio = function() {\n            u.updateMode(\"listening\"), u.output.worklet.port.postMessage({\n                type: \"interrupt\"\n            }), u.output.gain.gain.exponentialRampToValueAtTime(1e-4, u.output.context.currentTime + 2), setTimeout(function() {\n                u.output.gain.gain.value = u.volume, u.output.worklet.port.postMessage({\n                    type: \"clearInterrupted\"\n                });\n            }, 2e3);\n        }, this.onError = function(e, n) {\n            console.error(e, n), u.options.onError(e, n);\n        }, this.calculateVolume = function(e) {\n            if (0 === e.length) return 0;\n            for(var n = 0, t = 0; t < e.length; t++)n += e[t] / 255;\n            return (n /= e.length) < 0 ? 0 : n > 1 ? 1 : n;\n        }, this.getId = function() {\n            return u.connection.conversationId;\n        }, this.isOpen = function() {\n            return \"connected\" === u.status;\n        }, this.setVolume = function(e) {\n            u.volume = e.volume;\n        }, this.setMicMuted = function(e) {\n            u.input.setMuted(e);\n        }, this.getInputByteFrequencyData = function() {\n            return null != u.inputFrequencyData || (u.inputFrequencyData = new Uint8Array(u.input.analyser.frequencyBinCount)), u.input.analyser.getByteFrequencyData(u.inputFrequencyData), u.inputFrequencyData;\n        }, this.getOutputByteFrequencyData = function() {\n            return null != u.outputFrequencyData || (u.outputFrequencyData = new Uint8Array(u.output.analyser.frequencyBinCount)), u.output.analyser.getByteFrequencyData(u.outputFrequencyData), u.outputFrequencyData;\n        }, this.getInputVolume = function() {\n            return u.calculateVolume(u.getInputByteFrequencyData());\n        }, this.getOutputVolume = function() {\n            return u.calculateVolume(u.getOutputByteFrequencyData());\n        }, this.sendFeedback = function(e) {\n            u.canSendFeedback ? (u.connection.sendMessage({\n                type: \"feedback\",\n                score: e ? \"like\" : \"dislike\",\n                event_id: u.currentEventId\n            }), u.lastFeedbackEventId = u.currentEventId, u.updateCanSendFeedback()) : console.warn(0 === u.lastFeedbackEventId ? \"Cannot send feedback: the conversation has not started yet.\" : \"Cannot send feedback: feedback has already been sent for the current response.\");\n        }, this.sendContextualUpdate = function(e) {\n            u.connection.sendMessage({\n                type: \"contextual_update\",\n                text: e\n            });\n        }, this.options = e, this.connection = t, this.input = o, this.output = r, this.wakeLock = i, this.options.onConnect({\n            conversationId: t.conversationId\n        }), this.connection.onDisconnect(this.endSessionWithDetails), this.connection.onMessage(this.onMessage), this.input.worklet.port.onmessage = this.onInputWorkletMessage, this.output.worklet.port.onmessage = this.onOutputWorkletMessage, this.updateStatus(\"connected\");\n    }\n    return t.startSession = function(n) {\n        try {\n            var o = function() {\n                return $ee5c819c8591c8f0$var$h(function() {\n                    return Promise.resolve(navigator.mediaDevices.getUserMedia({\n                        audio: !0\n                    })).then(function(o) {\n                        var h;\n                        function p() {\n                            return Promise.resolve($ee5c819c8591c8f0$var$l.create(n)).then(function(o) {\n                                return c = o, Promise.resolve(Promise.all([\n                                    $ee5c819c8591c8f0$var$i.create($ee5c819c8591c8f0$var$e({}, c.inputFormat, {\n                                        preferHeadphonesForIosDevices: n.preferHeadphonesForIosDevices\n                                    })),\n                                    $ee5c819c8591c8f0$var$u.create(c.outputFormat)\n                                ])).then(function(e) {\n                                    var n;\n                                    return s = e[0], d = e[1], null == (n = m) || n.getTracks().forEach(function(e) {\n                                        return e.stop();\n                                    }), m = null, new t(a, c, s, d, v);\n                                });\n                            });\n                        }\n                        m = o;\n                        var f, g = null != (h = n.connectionDelay) ? h : {\n                            default: 0,\n                            android: 3e3\n                        }, y = g.default;\n                        if (/android/i.test(navigator.userAgent)) y = null != (f = g.android) ? f : y;\n                        else if ($ee5c819c8591c8f0$var$r()) {\n                            var _;\n                            y = null != (_ = g.ios) ? _ : y;\n                        }\n                        var b = function() {\n                            if (y > 0) return Promise.resolve(new Promise(function(e) {\n                                return setTimeout(e, y);\n                            })).then(function() {});\n                        }();\n                        return b && b.then ? b.then(p) : p();\n                    });\n                }, function(e) {\n                    var n, t, o;\n                    return a.onStatusChange({\n                        status: \"disconnected\"\n                    }), null == (n = m) || n.getTracks().forEach(function(e) {\n                        return e.stop();\n                    }), null == (t = c) || t.close(), Promise.resolve(null == (o = s) ? void 0 : o.close()).then(function() {\n                        var n;\n                        return Promise.resolve(null == (n = d) ? void 0 : n.close()).then(function() {\n                            function n() {\n                                throw e;\n                            }\n                            var t = $ee5c819c8591c8f0$var$h(function() {\n                                var e;\n                                return Promise.resolve(null == (e = v) ? void 0 : e.release()).then(function() {\n                                    v = null;\n                                });\n                            }, function() {});\n                            return t && t.then ? t.then(n) : n();\n                        });\n                    });\n                });\n            }, a = $ee5c819c8591c8f0$var$e({}, $ee5c819c8591c8f0$var$p, $ee5c819c8591c8f0$var$f, n);\n            a.onStatusChange({\n                status: \"connecting\"\n            }), a.onCanSendFeedbackChange({\n                canSendFeedback: !1\n            });\n            var s = null, c = null, d = null, m = null, v = null, g = function(e) {\n                if (null == (e = n.useWakeLock) || e) {\n                    var t = $ee5c819c8591c8f0$var$h(function() {\n                        return Promise.resolve(navigator.wakeLock.request(\"screen\")).then(function(e) {\n                            v = e;\n                        });\n                    }, function() {});\n                    if (t && t.then) return t.then(function() {});\n                }\n            }();\n            return Promise.resolve(g && g.then ? g.then(o) : o());\n        } catch (e) {\n            return Promise.reject(e);\n        }\n    }, t;\n}();\nfunction $ee5c819c8591c8f0$export$d6afbf68dbf63e6a(e, n, t) {\n    return void 0 === t && (t = \"https://api.elevenlabs.io\"), fetch(t + \"/v1/convai/conversations/\" + e + \"/feedback\", {\n        method: \"POST\",\n        body: JSON.stringify({\n            feedback: n ? \"like\" : \"dislike\"\n        }),\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    });\n}\n\n\n// Visualization module: canvas-based idle circle and reactive line driven by audio\nlet $812c95b36586ff42$var$audioCtx = null;\nlet $812c95b36586ff42$var$analyser = null;\nlet $812c95b36586ff42$var$dataArray = null;\nlet $812c95b36586ff42$var$rafId = null;\nlet $812c95b36586ff42$var$canvas = null;\nlet $812c95b36586ff42$var$ctx = null;\nlet $812c95b36586ff42$var$vizMode = 'idle'; // 'idle' | 'line'\nlet $812c95b36586ff42$var$silentGainNode = null;\nconst $812c95b36586ff42$var$mediaSourceMap = new WeakMap(); // HTMLMediaElement -> MediaElementAudioSourceNode\nconst $812c95b36586ff42$var$streamSourceMap = new WeakMap(); // MediaStream -> MediaStreamAudioSourceNode\nconst $812c95b36586ff42$var$playingEls = new Set();\nlet $812c95b36586ff42$var$activeConversation = null;\nlet $812c95b36586ff42$var$lastSdkBins = null;\n// Debug helpers\nlet $812c95b36586ff42$var$lastActive = false;\nlet $812c95b36586ff42$var$silentFrames = 0;\nconst $812c95b36586ff42$var$ACTIVE_THRESHOLD = 0.015; // RMS threshold\nconst $812c95b36586ff42$var$SILENT_FRAME_LIMIT = 20; // ~0.33s at 60fps\nconst $812c95b36586ff42$var$ensureAudioContext = async ()=>{\n    if (!$812c95b36586ff42$var$audioCtx) $812c95b36586ff42$var$audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n    if ($812c95b36586ff42$var$audioCtx.state === 'suspended') try {\n        await $812c95b36586ff42$var$audioCtx.resume();\n    } catch  {}\n};\nconst $812c95b36586ff42$export$7df4508c5acf21ae = (mode)=>{\n    if (mode !== $812c95b36586ff42$var$vizMode) {\n        console.log('[viz] mode ->', mode);\n        $812c95b36586ff42$var$vizMode = mode;\n    }\n};\nconst $812c95b36586ff42$var$buildAnalyserChain = (sourceNode)=>{\n    $812c95b36586ff42$var$analyser = $812c95b36586ff42$var$audioCtx && $812c95b36586ff42$var$audioCtx.createAnalyser ? $812c95b36586ff42$var$audioCtx.createAnalyser() : null;\n    if (!$812c95b36586ff42$var$analyser) return;\n    $812c95b36586ff42$var$analyser.fftSize = 2048;\n    $812c95b36586ff42$var$dataArray = new Uint8Array($812c95b36586ff42$var$analyser.frequencyBinCount);\n    try {\n        sourceNode.disconnect();\n    } catch  {}\n    sourceNode.connect($812c95b36586ff42$var$analyser);\n    // Keep graph alive but silent\n    if (!$812c95b36586ff42$var$silentGainNode) {\n        $812c95b36586ff42$var$silentGainNode = $812c95b36586ff42$var$audioCtx.createGain();\n        $812c95b36586ff42$var$silentGainNode.gain.value = 0.0;\n        $812c95b36586ff42$var$silentGainNode.connect($812c95b36586ff42$var$audioCtx.destination);\n    }\n    try {\n        $812c95b36586ff42$var$analyser.disconnect();\n    } catch  {}\n    $812c95b36586ff42$var$analyser.connect($812c95b36586ff42$var$silentGainNode);\n};\nconst $812c95b36586ff42$export$f3feba0435d608ff = async (el)=>{\n    if (!(el instanceof HTMLMediaElement)) return;\n    await $812c95b36586ff42$var$ensureAudioContext();\n    let source = $812c95b36586ff42$var$mediaSourceMap.get(el);\n    if (!source) {\n        try {\n            source = $812c95b36586ff42$var$audioCtx.createMediaElementSource(el);\n        } catch (e) {\n            console.warn('[viz] createMediaElementSource failed', e);\n        }\n        if (source) $812c95b36586ff42$var$mediaSourceMap.set(el, source);\n    }\n    if (source) $812c95b36586ff42$var$buildAnalyserChain(source);\n    try {\n        el.crossOrigin = 'anonymous';\n    } catch  {}\n    console.log('[viz] MediaElement connected', {\n        src: el.currentSrc || el.src\n    });\n    // Track play/pause events to control visualization\n    el.addEventListener('play', ()=>{\n        $812c95b36586ff42$var$playingEls.add(el);\n        $812c95b36586ff42$export$7df4508c5acf21ae('line');\n        console.log('[viz] element play');\n    });\n    const onStop = ()=>{\n        $812c95b36586ff42$var$playingEls.delete(el);\n        if ($812c95b36586ff42$var$playingEls.size === 0) $812c95b36586ff42$export$7df4508c5acf21ae('idle');\n        console.log('[viz] element stop/pause, playing count:', $812c95b36586ff42$var$playingEls.size);\n    };\n    el.addEventListener('pause', onStop);\n    el.addEventListener('ended', onStop);\n};\nconst $812c95b36586ff42$export$b62ab7b01fb852c0 = async (stream)=>{\n    if (!(stream instanceof MediaStream)) return;\n    await $812c95b36586ff42$var$ensureAudioContext();\n    let source = $812c95b36586ff42$var$streamSourceMap.get(stream);\n    if (!source) {\n        try {\n            source = $812c95b36586ff42$var$audioCtx.createMediaStreamSource(stream);\n        } catch (e) {\n            console.warn('[viz] createMediaStreamSource failed', e);\n        }\n        if (source) $812c95b36586ff42$var$streamSourceMap.set(stream, source);\n    }\n    if (source) $812c95b36586ff42$var$buildAnalyserChain(source);\n    $812c95b36586ff42$export$7df4508c5acf21ae('line');\n    console.log('[viz] MediaStream connected with tracks:', stream.getTracks().map((t)=>t.kind + ':' + t.readyState));\n    stream.getTracks().forEach((t)=>t.addEventListener('ended', ()=>{\n            if (stream.getTracks().every((tr)=>tr.readyState === 'ended')) {\n                $812c95b36586ff42$export$7df4508c5acf21ae('idle');\n                console.log('[viz] stream ended');\n            }\n        }));\n};\nconst $812c95b36586ff42$export$1fce99c0adc6f9c = ()=>{\n    const handler = async (type, target)=>{\n        if (!(target instanceof HTMLMediaElement)) return;\n        if (type === 'play') {\n            await $812c95b36586ff42$export$f3feba0435d608ff(target);\n            $812c95b36586ff42$var$playingEls.add(target);\n            $812c95b36586ff42$export$7df4508c5acf21ae('line');\n            console.log('[viz] global play', target.tagName);\n        } else {\n            $812c95b36586ff42$var$playingEls.delete(target);\n            if ($812c95b36586ff42$var$playingEls.size === 0) $812c95b36586ff42$export$7df4508c5acf21ae('idle');\n            console.log('[viz] global', type, 'playing count:', $812c95b36586ff42$var$playingEls.size);\n        }\n    };\n    document.addEventListener('play', (e)=>handler('play', e.target), true);\n    document.addEventListener('pause', (e)=>handler('pause', e.target), true);\n    document.addEventListener('ended', (e)=>handler('ended', e.target), true);\n};\nconst $812c95b36586ff42$export$49b7f52cc38c934a = async (conv)=>{\n    try {\n        if (!conv) return;\n        // Try element\n        const el = conv.audioElement || conv.audioEl || conv.audio;\n        if (el instanceof HTMLMediaElement) {\n            await $812c95b36586ff42$export$f3feba0435d608ff(el);\n            return;\n        }\n        // Try stream\n        const stream = conv.mediaStream || conv.outputStream || conv.remoteStream || conv.stream;\n        if (stream instanceof MediaStream) {\n            await $812c95b36586ff42$export$b62ab7b01fb852c0(stream);\n            return;\n        }\n        // Fallback: observe DOM for media created later\n        const mo = new MutationObserver((muts)=>{\n            muts.forEach((mut)=>{\n                mut.addedNodes?.forEach((n)=>{\n                    if (n instanceof HTMLMediaElement) $812c95b36586ff42$export$f3feba0435d608ff(n);\n                    if (n.querySelectorAll) n.querySelectorAll('audio,video').forEach($812c95b36586ff42$export$f3feba0435d608ff);\n                });\n            });\n        });\n        mo.observe(document.documentElement, {\n            childList: true,\n            subtree: true\n        });\n    } catch (e) {\n        console.warn('[viz] hookConversationAudio failed', e);\n    }\n};\nconst $812c95b36586ff42$export$84cc0adba6eaa4c6 = (conv)=>{\n    $812c95b36586ff42$var$activeConversation = conv;\n};\nconst $812c95b36586ff42$var$initCanvas = (canvasId)=>{\n    $812c95b36586ff42$var$canvas = document.getElementById(canvasId);\n    if (!$812c95b36586ff42$var$canvas) return;\n    $812c95b36586ff42$var$ctx = $812c95b36586ff42$var$canvas.getContext('2d');\n    const resize = ()=>{\n        const dpr = window.devicePixelRatio || 1;\n        const w = $812c95b36586ff42$var$canvas.clientWidth || window.innerWidth;\n        const h = $812c95b36586ff42$var$canvas.clientHeight || window.innerHeight;\n        $812c95b36586ff42$var$canvas.width = Math.floor(w * dpr);\n        $812c95b36586ff42$var$canvas.height = Math.floor(h * dpr);\n        $812c95b36586ff42$var$ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n    };\n    resize();\n    window.addEventListener('resize', resize);\n};\nconst $812c95b36586ff42$var$drawIdle = (tSec)=>{\n    if (!$812c95b36586ff42$var$ctx || !$812c95b36586ff42$var$canvas) return;\n    const w = $812c95b36586ff42$var$canvas.clientWidth;\n    const h = $812c95b36586ff42$var$canvas.clientHeight;\n    $812c95b36586ff42$var$ctx.clearRect(0, 0, w, h);\n    const cx = w / 2;\n    const cy = h / 2;\n    const base = Math.min(w, h) * 0.12;\n    const r = base * (1 + 0.06 * Math.sin(tSec * 2 * Math.PI * 0.9));\n    $812c95b36586ff42$var$ctx.shadowColor = '#00ff80';\n    $812c95b36586ff42$var$ctx.shadowBlur = 20;\n    $812c95b36586ff42$var$ctx.strokeStyle = '#00ff80';\n    $812c95b36586ff42$var$ctx.lineWidth = 3;\n    $812c95b36586ff42$var$ctx.beginPath();\n    $812c95b36586ff42$var$ctx.arc(cx, cy, r, 0, Math.PI * 2);\n    $812c95b36586ff42$var$ctx.stroke();\n};\nconst $812c95b36586ff42$var$drawLine = ()=>{\n    if (!$812c95b36586ff42$var$ctx || !$812c95b36586ff42$var$canvas) return;\n    const w = $812c95b36586ff42$var$canvas.clientWidth;\n    const h = $812c95b36586ff42$var$canvas.clientHeight;\n    $812c95b36586ff42$var$ctx.clearRect(0, 0, w, h);\n    $812c95b36586ff42$var$ctx.beginPath();\n    $812c95b36586ff42$var$ctx.lineWidth = 3;\n    $812c95b36586ff42$var$ctx.strokeStyle = '#00ff80';\n    $812c95b36586ff42$var$ctx.shadowColor = '#00ff80';\n    $812c95b36586ff42$var$ctx.shadowBlur = 16;\n    const midY = Math.floor(h / 2);\n    let rms = 0;\n    if ($812c95b36586ff42$var$analyser && $812c95b36586ff42$var$dataArray) {\n        $812c95b36586ff42$var$analyser.getByteTimeDomainData($812c95b36586ff42$var$dataArray);\n        // Remove DC offset to keep center exactly at midY\n        let mean = 0;\n        for(let i = 0; i < $812c95b36586ff42$var$dataArray.length; i++)mean += $812c95b36586ff42$var$dataArray[i];\n        mean /= $812c95b36586ff42$var$dataArray.length; // around 128, but measured live\n        const step = w / $812c95b36586ff42$var$dataArray.length;\n        let sum = 0;\n        for(let i = 0; i < $812c95b36586ff42$var$dataArray.length; i++){\n            const centered = ($812c95b36586ff42$var$dataArray[i] - mean) / 128; // now ~-1..1 around 0\n            const x = i * step;\n            const y = midY + centered * (h * 0.22);\n            if (i === 0) $812c95b36586ff42$var$ctx.moveTo(x, y);\n            else $812c95b36586ff42$var$ctx.lineTo(x, y);\n            sum += centered * centered;\n        }\n        rms = Math.sqrt(sum / $812c95b36586ff42$var$dataArray.length);\n    } else if ($812c95b36586ff42$var$activeConversation?.getOutputByteFrequencyData) {\n        try {\n            const res = $812c95b36586ff42$var$activeConversation.getOutputByteFrequencyData();\n            if (res && typeof res.then === 'function') res.then((bins)=>{\n                $812c95b36586ff42$var$lastSdkBins = bins;\n            }).catch(()=>{});\n            else if (res instanceof Uint8Array) $812c95b36586ff42$var$lastSdkBins = res;\n        } catch  {}\n        const bins = $812c95b36586ff42$var$lastSdkBins;\n        const len = bins?.length || 0;\n        if (len > 0) {\n            // Center bins by subtracting their average so graph oscillates equally\n            let avg = 0;\n            for(let i = 0; i < len; i++)avg += bins[i];\n            avg /= len || 1;\n            const step = w / len;\n            let sum = 0;\n            for(let i = 0; i < len; i++){\n                const centered = (bins[i] - avg) / 255; // roughly -0.5..0.5\n                const x = i * step;\n                const y = midY + centered * 2 * (h * 0.22); // scale to ~-1..1\n                if (i === 0) $812c95b36586ff42$var$ctx.moveTo(x, y);\n                else $812c95b36586ff42$var$ctx.lineTo(x, y);\n                sum += centered * centered;\n            }\n            rms = Math.sqrt(sum / len) / 1.1; // rough normalization\n        }\n    }\n    // Debug: log when audio starts/stops\n    const isActive = rms > $812c95b36586ff42$var$ACTIVE_THRESHOLD;\n    if (isActive && !$812c95b36586ff42$var$lastActive) console.log('[viz] audio signal detected, rms=', rms.toFixed(3));\n    if (!isActive) {\n        $812c95b36586ff42$var$silentFrames++;\n        if ($812c95b36586ff42$var$lastActive && $812c95b36586ff42$var$silentFrames > $812c95b36586ff42$var$SILENT_FRAME_LIMIT) console.log('[viz] audio gone silent');\n    } else $812c95b36586ff42$var$silentFrames = 0;\n    $812c95b36586ff42$var$lastActive = isActive;\n    $812c95b36586ff42$var$ctx.stroke();\n};\nconst $812c95b36586ff42$export$d379ea01857aee09 = (canvasId = 'vizCanvas')=>{\n    $812c95b36586ff42$var$initCanvas(canvasId);\n    cancelAnimationFrame($812c95b36586ff42$var$rafId);\n    const tick = (tMs)=>{\n        const tSec = tMs / 1000;\n        if ($812c95b36586ff42$var$vizMode === 'line') $812c95b36586ff42$var$drawLine();\n        else $812c95b36586ff42$var$drawIdle(tSec);\n        $812c95b36586ff42$var$rafId = requestAnimationFrame(tick);\n    };\n    $812c95b36586ff42$var$rafId = requestAnimationFrame(tick);\n};\n\n\nconst $dad545c909cfec2d$var$startBtn = document.getElementById('startBtn');\nconst $dad545c909cfec2d$var$stopBtn = document.getElementById('stopBtn');\nconst $dad545c909cfec2d$var$statusEl = document.getElementById('status');\nlet $dad545c909cfec2d$var$conversationInstance = null;\nlet $dad545c909cfec2d$var$audio = null;\n// Visualizer state is managed in visualizer.js\n// on page load: check for name and id parameters in url, then set the <span id=name> object\nconst $dad545c909cfec2d$var$urlParams = new URLSearchParams(window.location.search);\nlet $dad545c909cfec2d$var$config = {\n    name: $dad545c909cfec2d$var$urlParams.get('name'),\n    agentId: $dad545c909cfec2d$var$urlParams.get('id'),\n    mode: $dad545c909cfec2d$var$urlParams.get('mode') || 'default'\n};\n//try to load  a {name}.json from the server overwriting the whole config object\nconst $dad545c909cfec2d$var$loadConfig = async ()=>{\n    if (!$dad545c909cfec2d$var$config.agentId) try {\n        const response = await fetch(`./agents/${$dad545c909cfec2d$var$config.name}.json`);\n        if (!response.ok) throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n        const data = await response.json();\n        $dad545c909cfec2d$var$config = data;\n        console.log('Config loaded:', $dad545c909cfec2d$var$config);\n    } catch (error) {\n        console.error('Error loading config:', error);\n    }\n    document.getElementById('name').textContent = $dad545c909cfec2d$var$config.name;\n    if (!$dad545c909cfec2d$var$config.agentId) {\n        const startBtn = document.getElementById('startBtn');\n        startBtn.disabled = true;\n        startBtn.innerText = \"Agente n\\xe3o encontrado!\";\n    }\n    // Setup full mode background if needed\n    $dad545c909cfec2d$var$config.mode = $dad545c909cfec2d$var$urlParams.get('mode') || $dad545c909cfec2d$var$config.mode || 'default';\n    $dad545c909cfec2d$var$setupFullModeBackground();\n};\n$dad545c909cfec2d$var$loadConfig();\n// FunÃ§Ã£o para configurar o background image no modo full\nconst $dad545c909cfec2d$var$setupFullModeBackground = ()=>{\n    if ($dad545c909cfec2d$var$config.mode === 'full' && $dad545c909cfec2d$var$config.backgroundImage) {\n        const fullModeEl = document.getElementById('fullMode');\n        if (fullModeEl) {\n            // Aplica a imagem de fundo com opacity 0.5 e blend com preto\n            fullModeEl.style.setProperty('--bg-image', `url('${$dad545c909cfec2d$var$config.backgroundImage}')`);\n            fullModeEl.classList.add('has-bg');\n            console.log('Background image configured:', $dad545c909cfec2d$var$config.backgroundImage);\n        }\n    }\n};\n// FunÃ§Ã£o para atualizar o status na interface\nconst $dad545c909cfec2d$var$updateStatus = (status)=>{\n    $dad545c909cfec2d$var$statusEl.textContent = \"Status: \" + status;\n};\n// FunÃ§Ã£o para iniciar a conversa\nasync function $dad545c909cfec2d$var$startConversation() {\n    try {\n        // Primeiro, solicite acesso ao microfone e explique o porquÃª ao usuÃ¡rio\n        await navigator.mediaDevices.getUserMedia({\n            audio: true\n        });\n        $dad545c909cfec2d$var$updateStatus('Microfone liberado');\n        //Play an mp3 file and wait for it to finish\n        if ($dad545c909cfec2d$var$config.startAudio) {\n            $dad545c909cfec2d$var$startBtn.classList.add('hidden');\n            $dad545c909cfec2d$var$stopBtn.classList.remove('hidden');\n            $dad545c909cfec2d$var$audio = new Audio($dad545c909cfec2d$var$config.startAudio);\n            try {\n                $dad545c909cfec2d$var$audio.crossOrigin = 'anonymous';\n            } catch  {}\n            if ($dad545c909cfec2d$var$config.mode === 'full') {\n                await (0, $812c95b36586ff42$export$f3feba0435d608ff)($dad545c909cfec2d$var$audio);\n                (0, $812c95b36586ff42$export$7df4508c5acf21ae)('line');\n            }\n            $dad545c909cfec2d$var$audio.play();\n            $dad545c909cfec2d$var$updateStatus(\"Reproduzindo \\xe1udio de boas-vindas\");\n            await new Promise((resolve)=>{\n                $dad545c909cfec2d$var$audio.onended = ()=>{\n                    if ($dad545c909cfec2d$var$config.mode === 'full') (0, $812c95b36586ff42$export$7df4508c5acf21ae)('idle');\n                    resolve();\n                };\n            });\n        }\n        // Inicia a sessÃ£o de conversa com o agente\n        //Parse o ID do agente a partir da URL, parametro id\n        $dad545c909cfec2d$var$conversationInstance = await (0, $ee5c819c8591c8f0$export$8e86b22308382a1).startSession({\n            agentId: $dad545c909cfec2d$var$config.agentId,\n            // Callbacks opcionais:\n            onConnect: ()=>{\n                console.log('Conectado ao agente!');\n                $dad545c909cfec2d$var$updateStatus('Conectado');\n            },\n            onDisconnect: ()=>{\n                console.log(\"Conex\\xe3o encerrada.\");\n                $dad545c909cfec2d$var$updateStatus('Desconectado');\n            },\n            onMessage: (message)=>{\n                console.log('Mensagem recebida:', message);\n            // Aqui vocÃª pode, por exemplo, atualizar a interface com transcriÃ§Ãµes ou processar o Ã¡udio recebido.\n            },\n            onError: (error)=>{\n                console.error(\"Erro na sess\\xe3o:\", error);\n                $dad545c909cfec2d$var$updateStatus('Erro');\n            },\n            onStatusChange: (status)=>{\n                console.log('Status alterado:', status);\n            },\n            onModeChange: (mode)=>{\n                console.log('Modo alterado:', mode);\n                // Control visualization directly based on SDK mode\n                try {\n                    if ($dad545c909cfec2d$var$config.mode === 'full') {\n                        if (mode.mode == 'speaking') {\n                            (0, $812c95b36586ff42$export$7df4508c5acf21ae)('line');\n                            console.log('[viz] speaking!!!');\n                        } else {\n                            // Any other mode (listening, idle, etc.) goes to circle\n                            (0, $812c95b36586ff42$export$7df4508c5acf21ae)('idle');\n                            console.log('[viz] idle!');\n                        }\n                    }\n                } catch  {}\n            }\n        });\n        // Try to hook SDK audio for visualization\n        if ($dad545c909cfec2d$var$config.mode === 'full') {\n            await (0, $812c95b36586ff42$export$49b7f52cc38c934a)($dad545c909cfec2d$var$conversationInstance);\n            (0, $812c95b36586ff42$export$84cc0adba6eaa4c6)($dad545c909cfec2d$var$conversationInstance);\n        }\n    } catch (error) {\n        console.error('Erro ao iniciar a conversa:', error);\n        $dad545c909cfec2d$var$updateStatus('Erro ao iniciar');\n    }\n}\n// FunÃ§Ã£o para encerrar a conversa\nasync function $dad545c909cfec2d$var$endConversation() {\n    if ($dad545c909cfec2d$var$audio) {\n        $dad545c909cfec2d$var$audio.pause();\n        $dad545c909cfec2d$var$audio = null;\n    }\n    // Return to idle\n    (0, $812c95b36586ff42$export$7df4508c5acf21ae)('idle');\n    if ($dad545c909cfec2d$var$conversationInstance) {\n        await $dad545c909cfec2d$var$conversationInstance.endSession();\n        $dad545c909cfec2d$var$conversationInstance = null;\n    }\n    $dad545c909cfec2d$var$updateStatus('Desconectado');\n    $dad545c909cfec2d$var$startBtn.classList.remove('hidden');\n    $dad545c909cfec2d$var$stopBtn.classList.add('hidden');\n}\n// Eventos dos botÃµes\n$dad545c909cfec2d$var$startBtn.addEventListener('click', $dad545c909cfec2d$var$startConversation);\n$dad545c909cfec2d$var$stopBtn.addEventListener('click', $dad545c909cfec2d$var$endConversation);\n// Full mode UI wiring: toggle layout and click-to-start anywhere\nconst $dad545c909cfec2d$var$cardEl = document.getElementById('card');\nconst $dad545c909cfec2d$var$fullModeEl = document.getElementById('fullMode');\nif ($dad545c909cfec2d$var$config.mode === 'full') {\n    // Hide card, show overlay\n    if ($dad545c909cfec2d$var$cardEl) $dad545c909cfec2d$var$cardEl.classList.add('hidden');\n    if ($dad545c909cfec2d$var$fullModeEl) $dad545c909cfec2d$var$fullModeEl.classList.remove('hidden');\n    (0, $812c95b36586ff42$export$d379ea01857aee09)('vizCanvas');\n    (0, $812c95b36586ff42$export$1fce99c0adc6f9c)();\n    // Click anywhere to start/stop\n    $dad545c909cfec2d$var$fullModeEl.addEventListener('click', async ()=>{\n        if (!$dad545c909cfec2d$var$conversationInstance) await $dad545c909cfec2d$var$startConversation();\n        else await $dad545c909cfec2d$var$endConversation();\n    });\n    // Idle by default\n    (0, $812c95b36586ff42$export$7df4508c5acf21ae)('idle');\n}\n\n\n//# sourceMappingURL=arapy-11labs.985998c4.js.map\n","// Importa o Conversation do pacote @11labs/client\n import { Conversation } from '@11labs/client';\n import { initFullVisualizer, observeMediaPlayback, hookConversationAudio, connectMediaEl, setActiveConversation, updateVisualizerMode} from './visualizer.js';\n\n const startBtn = document.getElementById('startBtn');\n const stopBtn = document.getElementById('stopBtn');\n const statusEl = document.getElementById('status');\n let conversationInstance = null;\n let audio = null;\n// Visualizer state is managed in visualizer.js\n\n// on page load: check for name and id parameters in url, then set the <span id=name> object\n\n\nconst urlParams = new URLSearchParams(window.location.search);\nlet config = {\n    name: urlParams.get('name'),\n    agentId: urlParams.get('id'),\n    mode: urlParams.get('mode') || 'default',\n}\n\n//try to load  a {name}.json from the server overwriting the whole config object\nconst loadConfig = async () => {\n  if (!config.agentId) {\n      try {\n          const response = await fetch(`./agents/${config.name}.json`);\n          if (!response.ok) {\n            throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n          }\n          const data = await response.json();\n          config = data;\n          console.log('Config loaded:', config);\n\n      } catch (error) {\n          console.error('Error loading config:', error);\n      }\n  }\n\n  document.getElementById('name').textContent = config.name;\n\n  if (!config.agentId) {\n      const startBtn = document.getElementById('startBtn');\n      startBtn.disabled = true;\n      startBtn.innerText = \"Agente nÃ£o encontrado!\";\n  }\n\n  // Setup full mode background if needed\n  config.mode = urlParams.get('mode') || config.mode || 'default';\n  setupFullModeBackground();\n\n};\n\nloadConfig();\n\n// FunÃ§Ã£o para configurar o background image no modo full\nconst setupFullModeBackground = () => {\n  if (config.mode === 'full' && config.backgroundImage) {\n    const fullModeEl = document.getElementById('fullMode');\n    if (fullModeEl) {\n      // Aplica a imagem de fundo com opacity 0.5 e blend com preto\n      fullModeEl.style.setProperty('--bg-image', `url('${config.backgroundImage}')`);\n      fullModeEl.classList.add('has-bg');\n      console.log('Background image configured:', config.backgroundImage);\n    }\n  }\n};\n\n\n // FunÃ§Ã£o para atualizar o status na interface\n const updateStatus = (status) => {\n   statusEl.textContent = \"Status: \" + status;\n };\n\n // FunÃ§Ã£o para iniciar a conversa\n async function startConversation() {\n   try {\n     // Primeiro, solicite acesso ao microfone e explique o porquÃª ao usuÃ¡rio\n     await navigator.mediaDevices.getUserMedia({ audio: true });\n     updateStatus('Microfone liberado');\n\n    //Play an mp3 file and wait for it to finish\n      if (config.startAudio) {\n\n       startBtn.classList.add('hidden');\n       stopBtn.classList.remove('hidden');\n\n       audio = new Audio(config.startAudio);\n       try { audio.crossOrigin = 'anonymous'; } catch {}\n       if (config.mode === 'full') {\n         await connectMediaEl(audio);\n         updateVisualizerMode('line');\n       }\n        audio.play();\n        updateStatus('Reproduzindo Ã¡udio de boas-vindas');\n        await new Promise((resolve) => {\n          audio.onended = () => {\n            if (config.mode === 'full') updateVisualizerMode('idle');\n            resolve();\n          };\n        });  \n      }\n      \n     // Inicia a sessÃ£o de conversa com o agente\n     //Parse o ID do agente a partir da URL, parametro id\n     conversationInstance = await Conversation.startSession({\n       agentId: config.agentId,\n       // Callbacks opcionais:\n       onConnect: () => {\n         console.log('Conectado ao agente!');\n         updateStatus('Conectado');\n       },\n       onDisconnect: () => {\n         console.log('ConexÃ£o encerrada.');\n         updateStatus('Desconectado');\n       },\n       onMessage: (message) => {\n         console.log('Mensagem recebida:', message);\n         // Aqui vocÃª pode, por exemplo, atualizar a interface com transcriÃ§Ãµes ou processar o Ã¡udio recebido.\n       },\n       onError: (error) => {\n         console.error('Erro na sessÃ£o:', error);\n         updateStatus('Erro');\n       },\n       onStatusChange: (status) => {\n         console.log('Status alterado:', status);\n       },\n       onModeChange: (mode) => {\n          console.log('Modo alterado:', mode);\n          // Control visualization directly based on SDK mode\n          try {\n            if (config.mode === 'full') {\n              if (mode.mode == 'speaking') {\n                updateVisualizerMode('line');\n                console.log('[viz] speaking!!!');\n              } else {\n                // Any other mode (listening, idle, etc.) goes to circle\n                updateVisualizerMode('idle');\n                console.log('[viz] idle!');\n              }\n            }\n          } catch {}\n       },\n     });\n\n      // Try to hook SDK audio for visualization\n      if (config.mode === 'full') {\n        await hookConversationAudio(conversationInstance);\n        setActiveConversation(conversationInstance);\n      }\n\n   } catch (error) {\n     console.error('Erro ao iniciar a conversa:', error);\n     updateStatus('Erro ao iniciar');\n   }\n }\n\n // FunÃ§Ã£o para encerrar a conversa\n async function endConversation() {\n   if (audio) {\n      audio.pause();\n      audio = null;\n   }\n   // Return to idle\n   updateVisualizerMode('idle');\n   if (conversationInstance) {\n     await conversationInstance.endSession();\n     conversationInstance = null;\n   }\n   updateStatus('Desconectado');\n   startBtn.classList.remove('hidden');\n   stopBtn.classList.add('hidden');\n }\n\n // Eventos dos botÃµes\n startBtn.addEventListener('click', startConversation);\n stopBtn.addEventListener('click', endConversation);\n\n // Full mode UI wiring: toggle layout and click-to-start anywhere\n const cardEl = document.getElementById('card');\n const fullModeEl = document.getElementById('fullMode');\n if (config.mode === 'full') {\n   // Hide card, show overlay\n   if (cardEl) cardEl.classList.add('hidden');\n   if (fullModeEl) fullModeEl.classList.remove('hidden');\n  initFullVisualizer('vizCanvas');\n  observeMediaPlayback();\n   // Click anywhere to start/stop\n   fullModeEl.addEventListener('click', async () => {\n     if (!conversationInstance) {\n       await startConversation();\n     } else {\n       await endConversation();\n     }\n   });\n  // Idle by default\n  updateVisualizerMode('idle');\n }","function e(){return e=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)({}).hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},e.apply(null,arguments)}function n(e){for(var n=window.atob(e),t=n.length,o=new Uint8Array(t),r=0;r<t;r++)o[r]=n.charCodeAt(r);return o.buffer}var t=new Blob(['\\n      const BIAS = 0x84;\\n      const CLIP = 32635;\\n      const encodeTable = [\\n        0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,\\n        4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,\\n        5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,\\n        5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,\\n        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\\n        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\\n        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\\n        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7\\n      ];\\n      \\n      function encodeSample(sample) {\\n        let sign;\\n        let exponent;\\n        let mantissa;\\n        let muLawSample;\\n        sign = (sample >> 8) & 0x80;\\n        if (sign !== 0) sample = -sample;\\n        sample = sample + BIAS;\\n        if (sample > CLIP) sample = CLIP;\\n        exponent = encodeTable[(sample>>7) & 0xFF];\\n        mantissa = (sample >> (exponent+3)) & 0x0F;\\n        muLawSample = ~(sign | (exponent << 4) | mantissa);\\n        \\n        return muLawSample;\\n      }\\n    \\n      class RawAudioProcessor extends AudioWorkletProcessor {\\n        constructor() {\\n          super();\\n                    \\n          this.port.onmessage = ({ data }) => {\\n            switch (data.type) {\\n              case \"setFormat\":\\n                this.isMuted = false;\\n                this.buffer = []; // Initialize an empty buffer\\n                this.bufferSize = data.sampleRate / 4;\\n                this.format = data.format;\\n\\n                if (globalThis.LibSampleRate && sampleRate !== data.sampleRate) {\\n                  globalThis.LibSampleRate.create(1, sampleRate, data.sampleRate).then(resampler => {\\n                    this.resampler = resampler;\\n                  });\\n                }\\n                break;\\n              case \"setMuted\":\\n                this.isMuted = data.isMuted;\\n                break;\\n            }\\n          };\\n        }\\n        process(inputs) {\\n          if (!this.buffer) {\\n            return true;\\n          }\\n          \\n          const input = inputs[0]; // Get the first input node\\n          if (input.length > 0) {\\n            let channelData = input[0]; // Get the first channel\\'s data\\n\\n            // Resample the audio if necessary\\n            if (this.resampler) {\\n              channelData = this.resampler.full(channelData);\\n            }\\n\\n            // Add channel data to the buffer\\n            this.buffer.push(...channelData);\\n            // Get max volume \\n            let sum = 0.0;\\n            for (let i = 0; i < channelData.length; i++) {\\n              sum += channelData[i] * channelData[i];\\n            }\\n            const maxVolume = Math.sqrt(sum / channelData.length);\\n            // Check if buffer size has reached or exceeded the threshold\\n            if (this.buffer.length >= this.bufferSize) {\\n              const float32Array = this.isMuted \\n                ? new Float32Array(this.buffer.length)\\n                : new Float32Array(this.buffer);\\n\\n              let encodedArray = this.format === \"ulaw\"\\n                ? new Uint8Array(float32Array.length)\\n                : new Int16Array(float32Array.length);\\n\\n              // Iterate through the Float32Array and convert each sample to PCM16\\n              for (let i = 0; i < float32Array.length; i++) {\\n                // Clamp the value to the range [-1, 1]\\n                let sample = Math.max(-1, Math.min(1, float32Array[i]));\\n\\n                // Scale the sample to the range [-32768, 32767]\\n                let value = sample < 0 ? sample * 32768 : sample * 32767;\\n                if (this.format === \"ulaw\") {\\n                  value = encodeSample(Math.round(value));\\n                }\\n\\n                encodedArray[i] = value;\\n              }\\n\\n              // Send the buffered data to the main script\\n              this.port.postMessage([encodedArray, maxVolume]);\\n\\n              // Clear the buffer after sending\\n              this.buffer = [];\\n            }\\n          }\\n          return true; // Continue processing\\n        }\\n      }\\n      registerProcessor(\"raw-audio-processor\", RawAudioProcessor);\\n  '],{type:\"application/javascript\"}),o=URL.createObjectURL(t);function r(){return[\"iPad Simulator\",\"iPhone Simulator\",\"iPod Simulator\",\"iPad\",\"iPhone\",\"iPod\"].includes(navigator.platform)||navigator.userAgent.includes(\"Mac\")&&\"ontouchend\"in document}var i=/*#__PURE__*/function(){function e(e,n,t,o){this.context=void 0,this.analyser=void 0,this.worklet=void 0,this.inputStream=void 0,this.context=e,this.analyser=n,this.worklet=t,this.inputStream=o}e.create=function(n){var t=n.sampleRate,i=n.format,a=n.preferHeadphonesForIosDevices;try{var s=null,u=null;return Promise.resolve(function(n,c){try{var l=function(){function n(){function n(){return Promise.resolve(s.audioWorklet.addModule(o)).then(function(){return Promise.resolve(navigator.mediaDevices.getUserMedia({audio:c})).then(function(n){var o=s.createMediaStreamSource(u=n),r=new AudioWorkletNode(s,\"raw-audio-processor\");return r.port.postMessage({type:\"setFormat\",format:i,sampleRate:t}),o.connect(a),a.connect(r),Promise.resolve(s.resume()).then(function(){return new e(s,a,r,u)})})})}var r=navigator.mediaDevices.getSupportedConstraints().sampleRate,a=(s=new window.AudioContext(r?{sampleRate:t}:{})).createAnalyser(),l=function(){if(!r)return Promise.resolve(s.audioWorklet.addModule(\"https://cdn.jsdelivr.net/npm/@alexanderolsen/libsamplerate-js@2.1.2/dist/libsamplerate.worklet.js\")).then(function(){})}();return l&&l.then?l.then(n):n()}var c={sampleRate:{ideal:t},echoCancellation:{ideal:!0},noiseSuppression:{ideal:!0}},l=function(){if(r()&&a)return Promise.resolve(window.navigator.mediaDevices.enumerateDevices()).then(function(e){var n=e.find(function(e){return\"audioinput\"===e.kind&&[\"airpod\",\"headphone\",\"earphone\"].find(function(n){return e.label.toLowerCase().includes(n)})});n&&(c.deviceId={ideal:n.deviceId})})}();return l&&l.then?l.then(n):n()}()}catch(e){return c(e)}return l&&l.then?l.then(void 0,c):l}(0,function(e){var n,t;throw null==(n=u)||n.getTracks().forEach(function(e){return e.stop()}),null==(t=s)||t.close(),e}))}catch(e){return Promise.reject(e)}};var n=e.prototype;return n.close=function(){try{return this.inputStream.getTracks().forEach(function(e){return e.stop()}),Promise.resolve(this.context.close()).then(function(){})}catch(e){return Promise.reject(e)}},n.setMuted=function(e){this.worklet.port.postMessage({type:\"setMuted\",isMuted:e})},e}(),a=new Blob(['\\n      const decodeTable = [0,132,396,924,1980,4092,8316,16764];\\n      \\n      export function decodeSample(muLawSample) {\\n        let sign;\\n        let exponent;\\n        let mantissa;\\n        let sample;\\n        muLawSample = ~muLawSample;\\n        sign = (muLawSample & 0x80);\\n        exponent = (muLawSample >> 4) & 0x07;\\n        mantissa = muLawSample & 0x0F;\\n        sample = decodeTable[exponent] + (mantissa << (exponent+3));\\n        if (sign !== 0) sample = -sample;\\n\\n        return sample;\\n      }\\n      \\n      class AudioConcatProcessor extends AudioWorkletProcessor {\\n        constructor() {\\n          super();\\n          this.buffers = []; // Initialize an empty buffer\\n          this.cursor = 0;\\n          this.currentBuffer = null;\\n          this.wasInterrupted = false;\\n          this.finished = false;\\n          \\n          this.port.onmessage = ({ data }) => {\\n            switch (data.type) {\\n              case \"setFormat\":\\n                this.format = data.format;\\n                break;\\n              case \"buffer\":\\n                this.wasInterrupted = false;\\n                this.buffers.push(\\n                  this.format === \"ulaw\"\\n                    ? new Uint8Array(data.buffer)\\n                    : new Int16Array(data.buffer)\\n                );\\n                break;\\n              case \"interrupt\":\\n                this.wasInterrupted = true;\\n                break;\\n              case \"clearInterrupted\":\\n                if (this.wasInterrupted) {\\n                  this.wasInterrupted = false;\\n                  this.buffers = [];\\n                  this.currentBuffer = null;\\n                }\\n            }\\n          };\\n        }\\n        process(_, outputs) {\\n          let finished = false;\\n          const output = outputs[0][0];\\n          for (let i = 0; i < output.length; i++) {\\n            if (!this.currentBuffer) {\\n              if (this.buffers.length === 0) {\\n                finished = true;\\n                break;\\n              }\\n              this.currentBuffer = this.buffers.shift();\\n              this.cursor = 0;\\n            }\\n\\n            let value = this.currentBuffer[this.cursor];\\n            if (this.format === \"ulaw\") {\\n              value = decodeSample(value);\\n            }\\n            output[i] = value / 32768;\\n            this.cursor++;\\n\\n            if (this.cursor >= this.currentBuffer.length) {\\n              this.currentBuffer = null;\\n            }\\n          }\\n\\n          if (this.finished !== finished) {\\n            this.finished = finished;\\n            this.port.postMessage({ type: \"process\", finished });\\n          }\\n\\n          return true; // Continue processing\\n        }\\n      }\\n\\n      registerProcessor(\"audio-concat-processor\", AudioConcatProcessor);\\n    '],{type:\"application/javascript\"}),s=URL.createObjectURL(a),u=/*#__PURE__*/function(){function e(e,n,t,o){this.context=void 0,this.analyser=void 0,this.gain=void 0,this.worklet=void 0,this.context=e,this.analyser=n,this.gain=t,this.worklet=o}return e.create=function(n){var t=n.sampleRate,o=n.format;try{var r=null;return Promise.resolve(function(n,i){try{var a=(u=(r=new AudioContext({sampleRate:t})).createAnalyser(),(c=r.createGain()).connect(u),u.connect(r.destination),Promise.resolve(r.audioWorklet.addModule(s)).then(function(){var n=new AudioWorkletNode(r,\"audio-concat-processor\");return n.port.postMessage({type:\"setFormat\",format:o}),n.connect(c),Promise.resolve(r.resume()).then(function(){return new e(r,u,c,n)})}))}catch(e){return i(e)}var u,c;return a&&a.then?a.then(void 0,i):a}(0,function(e){var n;throw null==(n=r)||n.close(),e}))}catch(e){return Promise.reject(e)}},e.prototype.close=function(){try{return Promise.resolve(this.context.close()).then(function(){})}catch(e){return Promise.reject(e)}},e}();function c(e){return!!e.type}var l=/*#__PURE__*/function(){function e(e,n,t,o){var r=this;this.socket=void 0,this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.queue=[],this.disconnectionDetails=null,this.onDisconnectCallback=null,this.onMessageCallback=null,this.socket=e,this.conversationId=n,this.inputFormat=t,this.outputFormat=o,this.socket.addEventListener(\"error\",function(e){setTimeout(function(){return r.disconnect({reason:\"error\",message:\"The connection was closed due to a socket error.\",context:e})},0)}),this.socket.addEventListener(\"close\",function(e){r.disconnect(1e3===e.code?{reason:\"agent\",context:e}:{reason:\"error\",message:e.reason||\"The connection was closed by the server.\",context:e})}),this.socket.addEventListener(\"message\",function(e){try{var n=JSON.parse(e.data);if(!c(n))return;r.onMessageCallback?r.onMessageCallback(n):r.queue.push(n)}catch(e){}})}e.create=function(n){try{var t=null;return Promise.resolve(function(o,r){try{var i=(s=null!=(a=n.origin)?a:\"wss://api.elevenlabs.io\",u=n.signedUrl?n.signedUrl:s+\"/v1/convai/conversation?agent_id=\"+n.agentId,l=[\"convai\"],n.authorization&&l.push(\"bearer.\"+n.authorization),t=new WebSocket(u,l),Promise.resolve(new Promise(function(e,o){t.addEventListener(\"open\",function(){var e,o,r,i,a,s={type:\"conversation_initiation_client_data\"};n.overrides&&(s.conversation_config_override={agent:{prompt:null==(o=n.overrides.agent)?void 0:o.prompt,first_message:null==(r=n.overrides.agent)?void 0:r.firstMessage,language:null==(i=n.overrides.agent)?void 0:i.language},tts:{voice_id:null==(a=n.overrides.tts)?void 0:a.voiceId}}),n.customLlmExtraBody&&(s.custom_llm_extra_body=n.customLlmExtraBody),n.dynamicVariables&&(s.dynamic_variables=n.dynamicVariables),null==(e=t)||e.send(JSON.stringify(s))},{once:!0}),t.addEventListener(\"error\",function(e){setTimeout(function(){return o(e)},0)}),t.addEventListener(\"close\",o),t.addEventListener(\"message\",function(n){var t=JSON.parse(n.data);c(t)&&(\"conversation_initiation_metadata\"===t.type?e(t.conversation_initiation_metadata_event):console.warn(\"First received message is not conversation metadata.\"))},{once:!0})})).then(function(n){var o=n.conversation_id,r=n.agent_output_audio_format,i=n.user_input_audio_format,a=d(null!=i?i:\"pcm_16000\"),s=d(r);return new e(t,o,a,s)}))}catch(e){return r(e)}var a,s,u,l;return i&&i.then?i.then(void 0,r):i}(0,function(e){var n;throw null==(n=t)||n.close(),e}))}catch(e){return Promise.reject(e)}};var n=e.prototype;return n.close=function(){this.socket.close()},n.sendMessage=function(e){this.socket.send(JSON.stringify(e))},n.onMessage=function(e){this.onMessageCallback=e,this.queue.forEach(e),this.queue=[]},n.onDisconnect=function(e){this.onDisconnectCallback=e,this.disconnectionDetails&&e(this.disconnectionDetails)},n.disconnect=function(e){var n;this.disconnectionDetails||(this.disconnectionDetails=e,null==(n=this.onDisconnectCallback)||n.call(this,e))},e}();function d(e){var n=e.split(\"_\"),t=n[0],o=n[1];if(![\"pcm\",\"ulaw\"].includes(t))throw new Error(\"Invalid format: \"+e);var r=parseInt(o);if(isNaN(r))throw new Error(\"Invalid sample rate: \"+o);return{format:t,sampleRate:r}}function h(e,n){try{var t=e()}catch(e){return n(e)}return t&&t.then?t.then(void 0,n):t}var p={clientTools:{}},f={onConnect:function(){},onDebug:function(){},onDisconnect:function(){},onError:function(){},onMessage:function(){},onAudio:function(){},onModeChange:function(){},onStatusChange:function(){},onCanSendFeedbackChange:function(){}},m=/*#__PURE__*/function(){function t(e,t,o,r,i){var a=this,s=this,u=this;this.options=void 0,this.connection=void 0,this.input=void 0,this.output=void 0,this.wakeLock=void 0,this.lastInterruptTimestamp=0,this.mode=\"listening\",this.status=\"connecting\",this.inputFrequencyData=void 0,this.outputFrequencyData=void 0,this.volume=1,this.currentEventId=1,this.lastFeedbackEventId=1,this.canSendFeedback=!1,this.endSession=function(){return u.endSessionWithDetails({reason:\"user\"})},this.endSessionWithDetails=function(e){try{var n=function(){return a.connection.close(),Promise.resolve(a.input.close()).then(function(){return Promise.resolve(a.output.close()).then(function(){a.updateStatus(\"disconnected\"),a.options.onDisconnect(e)})})};if(\"connected\"!==a.status&&\"connecting\"!==a.status)return Promise.resolve();a.updateStatus(\"disconnecting\");var t=h(function(){var e;return Promise.resolve(null==(e=a.wakeLock)?void 0:e.release()).then(function(){a.wakeLock=null})},function(){});return Promise.resolve(t&&t.then?t.then(n):n())}catch(e){return Promise.reject(e)}},this.updateMode=function(e){e!==u.mode&&(u.mode=e,u.options.onModeChange({mode:e}))},this.updateStatus=function(e){e!==u.status&&(u.status=e,u.options.onStatusChange({status:e}))},this.updateCanSendFeedback=function(){var e=u.currentEventId!==u.lastFeedbackEventId;u.canSendFeedback!==e&&(u.canSendFeedback=e,u.options.onCanSendFeedbackChange({canSendFeedback:e}))},this.onMessage=function(e){try{switch(e.type){case\"interruption\":return e.interruption_event&&(s.lastInterruptTimestamp=e.interruption_event.event_id),s.fadeOutAudio(),Promise.resolve();case\"agent_response\":return s.options.onMessage({source:\"ai\",message:e.agent_response_event.agent_response}),Promise.resolve();case\"user_transcript\":return s.options.onMessage({source:\"user\",message:e.user_transcription_event.user_transcript}),Promise.resolve();case\"internal_tentative_agent_response\":return s.options.onDebug({type:\"tentative_agent_response\",response:e.tentative_agent_response_internal_event.tentative_agent_response}),Promise.resolve();case\"client_tool_call\":return Promise.resolve(function(){if(s.options.clientTools.hasOwnProperty(e.client_tool_call.tool_name)){var n=h(function(){return Promise.resolve(s.options.clientTools[e.client_tool_call.tool_name](e.client_tool_call.parameters)).then(function(n){var t=\"object\"==typeof n?JSON.stringify(n):String(n);s.connection.sendMessage({type:\"client_tool_result\",tool_call_id:e.client_tool_call.tool_call_id,result:t,is_error:!1})})},function(n){s.onError(\"Client tool execution failed with following error: \"+(null==n?void 0:n.message),{clientToolName:e.client_tool_call.tool_name}),s.connection.sendMessage({type:\"client_tool_result\",tool_call_id:e.client_tool_call.tool_call_id,result:\"Client tool execution failed: \"+(null==n?void 0:n.message),is_error:!0})});if(n&&n.then)return n.then(function(){})}else{if(s.options.onUnhandledClientToolCall)return void s.options.onUnhandledClientToolCall(e.client_tool_call);s.onError(\"Client tool with name \"+e.client_tool_call.tool_name+\" is not defined on client\",{clientToolName:e.client_tool_call.tool_name}),s.connection.sendMessage({type:\"client_tool_result\",tool_call_id:e.client_tool_call.tool_call_id,result:\"Client tool with name \"+e.client_tool_call.tool_name+\" is not defined on client\",is_error:!0})}}());case\"audio\":return s.lastInterruptTimestamp<=e.audio_event.event_id&&(s.options.onAudio(e.audio_event.audio_base_64),s.addAudioBase64Chunk(e.audio_event.audio_base_64),s.currentEventId=e.audio_event.event_id,s.updateCanSendFeedback(),s.updateMode(\"speaking\")),Promise.resolve();case\"ping\":return s.connection.sendMessage({type:\"pong\",event_id:e.ping_event.event_id}),Promise.resolve();default:return s.options.onDebug(e),Promise.resolve()}}catch(e){return Promise.reject(e)}},this.onInputWorkletMessage=function(e){var n,t;\"connected\"===u.status&&u.connection.sendMessage({user_audio_chunk:(n=e.data[0].buffer,t=new Uint8Array(n),window.btoa(String.fromCharCode.apply(String,t)))})},this.onOutputWorkletMessage=function(e){var n=e.data;\"process\"===n.type&&u.updateMode(n.finished?\"listening\":\"speaking\")},this.addAudioBase64Chunk=function(e){u.output.gain.gain.value=u.volume,u.output.worklet.port.postMessage({type:\"clearInterrupted\"}),u.output.worklet.port.postMessage({type:\"buffer\",buffer:n(e)})},this.fadeOutAudio=function(){u.updateMode(\"listening\"),u.output.worklet.port.postMessage({type:\"interrupt\"}),u.output.gain.gain.exponentialRampToValueAtTime(1e-4,u.output.context.currentTime+2),setTimeout(function(){u.output.gain.gain.value=u.volume,u.output.worklet.port.postMessage({type:\"clearInterrupted\"})},2e3)},this.onError=function(e,n){console.error(e,n),u.options.onError(e,n)},this.calculateVolume=function(e){if(0===e.length)return 0;for(var n=0,t=0;t<e.length;t++)n+=e[t]/255;return(n/=e.length)<0?0:n>1?1:n},this.getId=function(){return u.connection.conversationId},this.isOpen=function(){return\"connected\"===u.status},this.setVolume=function(e){u.volume=e.volume},this.setMicMuted=function(e){u.input.setMuted(e)},this.getInputByteFrequencyData=function(){return null!=u.inputFrequencyData||(u.inputFrequencyData=new Uint8Array(u.input.analyser.frequencyBinCount)),u.input.analyser.getByteFrequencyData(u.inputFrequencyData),u.inputFrequencyData},this.getOutputByteFrequencyData=function(){return null!=u.outputFrequencyData||(u.outputFrequencyData=new Uint8Array(u.output.analyser.frequencyBinCount)),u.output.analyser.getByteFrequencyData(u.outputFrequencyData),u.outputFrequencyData},this.getInputVolume=function(){return u.calculateVolume(u.getInputByteFrequencyData())},this.getOutputVolume=function(){return u.calculateVolume(u.getOutputByteFrequencyData())},this.sendFeedback=function(e){u.canSendFeedback?(u.connection.sendMessage({type:\"feedback\",score:e?\"like\":\"dislike\",event_id:u.currentEventId}),u.lastFeedbackEventId=u.currentEventId,u.updateCanSendFeedback()):console.warn(0===u.lastFeedbackEventId?\"Cannot send feedback: the conversation has not started yet.\":\"Cannot send feedback: feedback has already been sent for the current response.\")},this.sendContextualUpdate=function(e){u.connection.sendMessage({type:\"contextual_update\",text:e})},this.options=e,this.connection=t,this.input=o,this.output=r,this.wakeLock=i,this.options.onConnect({conversationId:t.conversationId}),this.connection.onDisconnect(this.endSessionWithDetails),this.connection.onMessage(this.onMessage),this.input.worklet.port.onmessage=this.onInputWorkletMessage,this.output.worklet.port.onmessage=this.onOutputWorkletMessage,this.updateStatus(\"connected\")}return t.startSession=function(n){try{var o=function(){return h(function(){return Promise.resolve(navigator.mediaDevices.getUserMedia({audio:!0})).then(function(o){var h;function p(){return Promise.resolve(l.create(n)).then(function(o){return c=o,Promise.resolve(Promise.all([i.create(e({},c.inputFormat,{preferHeadphonesForIosDevices:n.preferHeadphonesForIosDevices})),u.create(c.outputFormat)])).then(function(e){var n;return s=e[0],d=e[1],null==(n=m)||n.getTracks().forEach(function(e){return e.stop()}),m=null,new t(a,c,s,d,v)})})}m=o;var f,g=null!=(h=n.connectionDelay)?h:{default:0,android:3e3},y=g.default;if(/android/i.test(navigator.userAgent))y=null!=(f=g.android)?f:y;else if(r()){var _;y=null!=(_=g.ios)?_:y}var b=function(){if(y>0)return Promise.resolve(new Promise(function(e){return setTimeout(e,y)})).then(function(){})}();return b&&b.then?b.then(p):p()})},function(e){var n,t,o;return a.onStatusChange({status:\"disconnected\"}),null==(n=m)||n.getTracks().forEach(function(e){return e.stop()}),null==(t=c)||t.close(),Promise.resolve(null==(o=s)?void 0:o.close()).then(function(){var n;return Promise.resolve(null==(n=d)?void 0:n.close()).then(function(){function n(){throw e}var t=h(function(){var e;return Promise.resolve(null==(e=v)?void 0:e.release()).then(function(){v=null})},function(){});return t&&t.then?t.then(n):n()})})})},a=e({},p,f,n);a.onStatusChange({status:\"connecting\"}),a.onCanSendFeedbackChange({canSendFeedback:!1});var s=null,c=null,d=null,m=null,v=null,g=function(e){if(null==(e=n.useWakeLock)||e){var t=h(function(){return Promise.resolve(navigator.wakeLock.request(\"screen\")).then(function(e){v=e})},function(){});if(t&&t.then)return t.then(function(){})}}();return Promise.resolve(g&&g.then?g.then(o):o())}catch(e){return Promise.reject(e)}},t}();function v(e,n,t){return void 0===t&&(t=\"https://api.elevenlabs.io\"),fetch(t+\"/v1/convai/conversations/\"+e+\"/feedback\",{method:\"POST\",body:JSON.stringify({feedback:n?\"like\":\"dislike\"}),headers:{\"Content-Type\":\"application/json\"}})}export{m as Conversation,v as postOverallFeedback};\n//# sourceMappingURL=lib.module.js.map\n","export function arrayBufferToBase64(b: ArrayBufferLike) {\n  const buffer = new Uint8Array(b);\n  // @ts-ignore\n  const base64Data = window.btoa(String.fromCharCode(...buffer));\n  return base64Data;\n}\n\nexport function base64ToArrayBuffer(base64: string): ArrayBuffer {\n  const binaryString = window.atob(base64);\n  const len = binaryString.length;\n  const bytes = new Uint8Array(len);\n  for (let i = 0; i < len; i++) {\n    bytes[i] = binaryString.charCodeAt(i);\n  }\n  return bytes.buffer;\n}\n","/*\n * ulaw encoding logic taken from the wavefile library\n * https://github.com/rochars/wavefile/blob/master/lib/codecs/mulaw.js\n */\n\nconst blob = new Blob(\n  [\n    // language=JavaScript\n    `\n      const BIAS = 0x84;\n      const CLIP = 32635;\n      const encodeTable = [\n        0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,\n        4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,\n        5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,\n        5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,\n        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\n        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\n        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\n        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\n        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7\n      ];\n      \n      function encodeSample(sample) {\n        let sign;\n        let exponent;\n        let mantissa;\n        let muLawSample;\n        sign = (sample >> 8) & 0x80;\n        if (sign !== 0) sample = -sample;\n        sample = sample + BIAS;\n        if (sample > CLIP) sample = CLIP;\n        exponent = encodeTable[(sample>>7) & 0xFF];\n        mantissa = (sample >> (exponent+3)) & 0x0F;\n        muLawSample = ~(sign | (exponent << 4) | mantissa);\n        \n        return muLawSample;\n      }\n    \n      class RawAudioProcessor extends AudioWorkletProcessor {\n        constructor() {\n          super();\n                    \n          this.port.onmessage = ({ data }) => {\n            switch (data.type) {\n              case \"setFormat\":\n                this.isMuted = false;\n                this.buffer = []; // Initialize an empty buffer\n                this.bufferSize = data.sampleRate / 4;\n                this.format = data.format;\n\n                if (globalThis.LibSampleRate && sampleRate !== data.sampleRate) {\n                  globalThis.LibSampleRate.create(1, sampleRate, data.sampleRate).then(resampler => {\n                    this.resampler = resampler;\n                  });\n                }\n                break;\n              case \"setMuted\":\n                this.isMuted = data.isMuted;\n                break;\n            }\n          };\n        }\n        process(inputs) {\n          if (!this.buffer) {\n            return true;\n          }\n          \n          const input = inputs[0]; // Get the first input node\n          if (input.length > 0) {\n            let channelData = input[0]; // Get the first channel's data\n\n            // Resample the audio if necessary\n            if (this.resampler) {\n              channelData = this.resampler.full(channelData);\n            }\n\n            // Add channel data to the buffer\n            this.buffer.push(...channelData);\n            // Get max volume \n            let sum = 0.0;\n            for (let i = 0; i < channelData.length; i++) {\n              sum += channelData[i] * channelData[i];\n            }\n            const maxVolume = Math.sqrt(sum / channelData.length);\n            // Check if buffer size has reached or exceeded the threshold\n            if (this.buffer.length >= this.bufferSize) {\n              const float32Array = this.isMuted \n                ? new Float32Array(this.buffer.length)\n                : new Float32Array(this.buffer);\n\n              let encodedArray = this.format === \"ulaw\"\n                ? new Uint8Array(float32Array.length)\n                : new Int16Array(float32Array.length);\n\n              // Iterate through the Float32Array and convert each sample to PCM16\n              for (let i = 0; i < float32Array.length; i++) {\n                // Clamp the value to the range [-1, 1]\n                let sample = Math.max(-1, Math.min(1, float32Array[i]));\n\n                // Scale the sample to the range [-32768, 32767]\n                let value = sample < 0 ? sample * 32768 : sample * 32767;\n                if (this.format === \"ulaw\") {\n                  value = encodeSample(Math.round(value));\n                }\n\n                encodedArray[i] = value;\n              }\n\n              // Send the buffered data to the main script\n              this.port.postMessage([encodedArray, maxVolume]);\n\n              // Clear the buffer after sending\n              this.buffer = [];\n            }\n          }\n          return true; // Continue processing\n        }\n      }\n      registerProcessor(\"raw-audio-processor\", RawAudioProcessor);\n  `,\n  ],\n  { type: \"application/javascript\" }\n);\n\nexport const rawAudioProcessor = URL.createObjectURL(blob);\n","export function isIosDevice() {\n  return (\n    [\n      \"iPad Simulator\",\n      \"iPhone Simulator\",\n      \"iPod Simulator\",\n      \"iPad\",\n      \"iPhone\",\n      \"iPod\",\n    ].includes(navigator.platform) ||\n    // iPad on iOS 13 detection\n    (navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document)\n  );\n}\n\nexport function isAndroidDevice() {\n  return /android/i.test(navigator.userAgent);\n}\n","import { rawAudioProcessor } from \"./rawAudioProcessor\";\nimport { FormatConfig } from \"./connection\";\nimport { isIosDevice } from \"./compatibility\";\n\nexport type InputConfig = {\n  preferHeadphonesForIosDevices?: boolean;\n};\n\nconst LIBSAMPLERATE_JS =\n  \"https://cdn.jsdelivr.net/npm/@alexanderolsen/libsamplerate-js@2.1.2/dist/libsamplerate.worklet.js\";\n\nexport class Input {\n  public static async create({\n    sampleRate,\n    format,\n    preferHeadphonesForIosDevices,\n  }: FormatConfig & InputConfig): Promise<Input> {\n    let context: AudioContext | null = null;\n    let inputStream: MediaStream | null = null;\n\n    try {\n      const options: MediaTrackConstraints = {\n        sampleRate: { ideal: sampleRate },\n        echoCancellation: { ideal: true },\n        noiseSuppression: { ideal: true },\n      };\n\n      if (isIosDevice() && preferHeadphonesForIosDevices) {\n        const availableDevices =\n          await window.navigator.mediaDevices.enumerateDevices();\n        const idealDevice = availableDevices.find(\n          d =>\n            // cautious to include \"bluetooth\" in the search\n            // as might trigger bluetooth speakers\n            d.kind === \"audioinput\" &&\n            [\"airpod\", \"headphone\", \"earphone\"].find(keyword =>\n              d.label.toLowerCase().includes(keyword)\n            )\n        );\n        if (idealDevice) {\n          options.deviceId = { ideal: idealDevice.deviceId };\n        }\n      }\n\n      const supportsSampleRateConstraint =\n        navigator.mediaDevices.getSupportedConstraints().sampleRate;\n\n      context = new window.AudioContext(\n        supportsSampleRateConstraint ? { sampleRate } : {}\n      );\n      const analyser = context.createAnalyser();\n      if (!supportsSampleRateConstraint) {\n        await context.audioWorklet.addModule(LIBSAMPLERATE_JS);\n      }\n      await context.audioWorklet.addModule(rawAudioProcessor);\n\n      inputStream = await navigator.mediaDevices.getUserMedia({\n        audio: options,\n      });\n\n      const source = context.createMediaStreamSource(inputStream);\n      const worklet = new AudioWorkletNode(context, \"raw-audio-processor\");\n      worklet.port.postMessage({ type: \"setFormat\", format, sampleRate });\n\n      source.connect(analyser);\n      analyser.connect(worklet);\n\n      await context.resume();\n\n      return new Input(context, analyser, worklet, inputStream);\n    } catch (error) {\n      inputStream?.getTracks().forEach(track => track.stop());\n      context?.close();\n      throw error;\n    }\n  }\n\n  private constructor(\n    public readonly context: AudioContext,\n    public readonly analyser: AnalyserNode,\n    public readonly worklet: AudioWorkletNode,\n    public readonly inputStream: MediaStream\n  ) {}\n\n  public async close() {\n    this.inputStream.getTracks().forEach(track => track.stop());\n    await this.context.close();\n  }\n\n  public setMuted(isMuted: boolean) {\n    this.worklet.port.postMessage({ type: \"setMuted\", isMuted });\n  }\n}\n","/*\n * ulaw decoding logic taken from the wavefile library\n * https://github.com/rochars/wavefile/blob/master/lib/codecs/mulaw.js\n */\n\nconst blob = new Blob(\n  [\n    // language=JavaScript\n    `\n      const decodeTable = [0,132,396,924,1980,4092,8316,16764];\n      \n      export function decodeSample(muLawSample) {\n        let sign;\n        let exponent;\n        let mantissa;\n        let sample;\n        muLawSample = ~muLawSample;\n        sign = (muLawSample & 0x80);\n        exponent = (muLawSample >> 4) & 0x07;\n        mantissa = muLawSample & 0x0F;\n        sample = decodeTable[exponent] + (mantissa << (exponent+3));\n        if (sign !== 0) sample = -sample;\n\n        return sample;\n      }\n      \n      class AudioConcatProcessor extends AudioWorkletProcessor {\n        constructor() {\n          super();\n          this.buffers = []; // Initialize an empty buffer\n          this.cursor = 0;\n          this.currentBuffer = null;\n          this.wasInterrupted = false;\n          this.finished = false;\n          \n          this.port.onmessage = ({ data }) => {\n            switch (data.type) {\n              case \"setFormat\":\n                this.format = data.format;\n                break;\n              case \"buffer\":\n                this.wasInterrupted = false;\n                this.buffers.push(\n                  this.format === \"ulaw\"\n                    ? new Uint8Array(data.buffer)\n                    : new Int16Array(data.buffer)\n                );\n                break;\n              case \"interrupt\":\n                this.wasInterrupted = true;\n                break;\n              case \"clearInterrupted\":\n                if (this.wasInterrupted) {\n                  this.wasInterrupted = false;\n                  this.buffers = [];\n                  this.currentBuffer = null;\n                }\n            }\n          };\n        }\n        process(_, outputs) {\n          let finished = false;\n          const output = outputs[0][0];\n          for (let i = 0; i < output.length; i++) {\n            if (!this.currentBuffer) {\n              if (this.buffers.length === 0) {\n                finished = true;\n                break;\n              }\n              this.currentBuffer = this.buffers.shift();\n              this.cursor = 0;\n            }\n\n            let value = this.currentBuffer[this.cursor];\n            if (this.format === \"ulaw\") {\n              value = decodeSample(value);\n            }\n            output[i] = value / 32768;\n            this.cursor++;\n\n            if (this.cursor >= this.currentBuffer.length) {\n              this.currentBuffer = null;\n            }\n          }\n\n          if (this.finished !== finished) {\n            this.finished = finished;\n            this.port.postMessage({ type: \"process\", finished });\n          }\n\n          return true; // Continue processing\n        }\n      }\n\n      registerProcessor(\"audio-concat-processor\", AudioConcatProcessor);\n    `,\n  ],\n  { type: \"application/javascript\" }\n);\n\nexport const audioConcatProcessor = URL.createObjectURL(blob);\n","import { audioConcatProcessor } from \"./audioConcatProcessor\";\nimport { FormatConfig } from \"./connection\";\n\nexport class Output {\n  public static async create({\n    sampleRate,\n    format,\n  }: FormatConfig): Promise<Output> {\n    let context: AudioContext | null = null;\n    try {\n      context = new AudioContext({ sampleRate });\n      const analyser = context.createAnalyser();\n      const gain = context.createGain();\n      gain.connect(analyser);\n      analyser.connect(context.destination);\n      await context.audioWorklet.addModule(audioConcatProcessor);\n      const worklet = new AudioWorkletNode(context, \"audio-concat-processor\");\n      worklet.port.postMessage({ type: \"setFormat\", format });\n      worklet.connect(gain);\n\n      await context.resume();\n\n      return new Output(context, analyser, gain, worklet);\n    } catch (error) {\n      context?.close();\n      throw error;\n    }\n  }\n\n  private constructor(\n    public readonly context: AudioContext,\n    public readonly analyser: AnalyserNode,\n    public readonly gain: GainNode,\n    public readonly worklet: AudioWorkletNode\n  ) {}\n\n  public async close() {\n    await this.context.close();\n  }\n}\n","import { Language } from \"./connection\";\n\nexport type UserTranscriptionEvent = {\n  type: \"user_transcript\";\n  user_transcription_event: { user_transcript: string };\n};\nexport type AgentResponseEvent = {\n  type: \"agent_response\";\n  agent_response_event: { agent_response: string };\n};\nexport type AgentAudioEvent = {\n  type: \"audio\";\n  audio_event: {\n    audio_base_64: string;\n    event_id: number;\n  };\n};\nexport type InterruptionEvent = {\n  type: \"interruption\";\n  interruption_event: {\n    event_id: number;\n  };\n};\nexport type InternalTentativeAgentResponseEvent = {\n  type: \"internal_tentative_agent_response\";\n  tentative_agent_response_internal_event: {\n    tentative_agent_response: string;\n  };\n};\nexport type ConfigEvent = {\n  type: \"conversation_initiation_metadata\";\n  conversation_initiation_metadata_event: {\n    conversation_id: string;\n    agent_output_audio_format: string;\n    user_input_audio_format?: string;\n  };\n};\nexport type PingEvent = {\n  type: \"ping\";\n  ping_event: {\n    event_id: number;\n    ping_ms?: number;\n  };\n};\nexport type ClientToolCallEvent = {\n  type: \"client_tool_call\";\n  client_tool_call: {\n    tool_name: string;\n    tool_call_id: string;\n    parameters: any;\n    expects_response: boolean;\n  };\n};\n\n// TODO correction missing\nexport type IncomingSocketEvent =\n  | UserTranscriptionEvent\n  | AgentResponseEvent\n  | AgentAudioEvent\n  | InterruptionEvent\n  | InternalTentativeAgentResponseEvent\n  | ConfigEvent\n  | PingEvent\n  | ClientToolCallEvent;\n\nexport type PongEvent = {\n  type: \"pong\";\n  event_id: number;\n};\nexport type UserAudioEvent = {\n  user_audio_chunk: string;\n};\nexport type UserFeedbackEvent = {\n  type: \"feedback\";\n  score: \"like\" | \"dislike\";\n  event_id: number;\n};\nexport type ClientToolResultEvent = {\n  type: \"client_tool_result\";\n  tool_call_id: string;\n  result: any;\n  is_error: boolean;\n};\nexport type InitiationClientDataEvent = {\n  type: \"conversation_initiation_client_data\";\n  conversation_config_override?: {\n    agent?: {\n      prompt?: {\n        prompt?: string;\n      };\n      first_message?: string;\n      language?: Language;\n    };\n    tts?: {\n      voice_id?: string;\n    };\n  };\n  custom_llm_extra_body?: any;\n  dynamic_variables?: Record<string, string | number | boolean>;\n};\nexport type ContextualUpdateEvent = {\n  type: \"contextual_update\";\n  text: string;\n};\nexport type OutgoingSocketEvent =\n  | PongEvent\n  | UserAudioEvent\n  | InitiationClientDataEvent\n  | UserFeedbackEvent\n  | ClientToolResultEvent\n  | ContextualUpdateEvent;\n\nexport function isValidSocketEvent(event: any): event is IncomingSocketEvent {\n  return !!event.type;\n}\n","import {\n  InitiationClientDataEvent,\n  ConfigEvent,\n  isValidSocketEvent,\n  OutgoingSocketEvent,\n  IncomingSocketEvent,\n} from \"./events\";\n\nconst MAIN_PROTOCOL = \"convai\";\n\nexport type Language =\n  | \"en\"\n  | \"ja\"\n  | \"zh\"\n  | \"de\"\n  | \"hi\"\n  | \"fr\"\n  | \"ko\"\n  | \"pt\"\n  | \"pt-br\"\n  | \"it\"\n  | \"es\"\n  | \"id\"\n  | \"nl\"\n  | \"tr\"\n  | \"pl\"\n  | \"sv\"\n  | \"bg\"\n  | \"ro\"\n  | \"ar\"\n  | \"cs\"\n  | \"el\"\n  | \"fi\"\n  | \"ms\"\n  | \"da\"\n  | \"ta\"\n  | \"uk\"\n  | \"ru\"\n  | \"hu\"\n  | \"no\"\n  | \"vi\";\nexport type SessionConfig = {\n  origin?: string;\n  authorization?: string;\n  overrides?: {\n    agent?: {\n      prompt?: {\n        prompt?: string;\n      };\n      firstMessage?: string;\n      language?: Language;\n    };\n    tts?: {\n      voiceId?: string;\n    };\n  };\n  customLlmExtraBody?: any;\n  dynamicVariables?: Record<string, string | number | boolean>;\n  useWakeLock?: boolean;\n  connectionDelay?: {\n    default: number;\n    android?: number;\n    ios?: number;\n  };\n} & (\n  | { signedUrl: string; agentId?: undefined }\n  | { agentId: string; signedUrl?: undefined }\n);\nexport type FormatConfig = {\n  format: \"pcm\" | \"ulaw\";\n  sampleRate: number;\n};\nexport type DisconnectionDetails =\n  | {\n      reason: \"error\";\n      message: string;\n      context: Event;\n    }\n  | {\n      reason: \"agent\";\n      context: CloseEvent;\n    }\n  | {\n      reason: \"user\";\n    };\nexport type OnDisconnectCallback = (details: DisconnectionDetails) => void;\nexport type OnMessageCallback = (event: IncomingSocketEvent) => void;\n\nconst WSS_API_ORIGIN = \"wss://api.elevenlabs.io\";\nconst WSS_API_PATHNAME = \"/v1/convai/conversation?agent_id=\";\n\nexport class Connection {\n  public static async create(config: SessionConfig): Promise<Connection> {\n    let socket: WebSocket | null = null;\n\n    try {\n      const origin = config.origin ?? WSS_API_ORIGIN;\n      const url = config.signedUrl\n        ? config.signedUrl\n        : origin + WSS_API_PATHNAME + config.agentId;\n\n      const protocols = [MAIN_PROTOCOL];\n      if (config.authorization) {\n        protocols.push(`bearer.${config.authorization}`);\n      }\n      socket = new WebSocket(url, protocols);\n      const conversationConfig = await new Promise<\n        ConfigEvent[\"conversation_initiation_metadata_event\"]\n      >((resolve, reject) => {\n        socket!.addEventListener(\n          \"open\",\n          () => {\n            const overridesEvent: InitiationClientDataEvent = {\n              type: \"conversation_initiation_client_data\",\n            };\n\n            if (config.overrides) {\n              overridesEvent.conversation_config_override = {\n                agent: {\n                  prompt: config.overrides.agent?.prompt,\n                  first_message: config.overrides.agent?.firstMessage,\n                  language: config.overrides.agent?.language,\n                },\n                tts: {\n                  voice_id: config.overrides.tts?.voiceId,\n                },\n              };\n            }\n\n            if (config.customLlmExtraBody) {\n              overridesEvent.custom_llm_extra_body = config.customLlmExtraBody;\n            }\n\n            if (config.dynamicVariables) {\n              overridesEvent.dynamic_variables = config.dynamicVariables;\n            }\n\n            socket?.send(JSON.stringify(overridesEvent));\n          },\n          { once: true }\n        );\n        socket!.addEventListener(\"error\", event => {\n          // In case the error event is followed by a close event, we want the\n          // latter to be the one that rejects the promise as it contains more\n          // useful information.\n          setTimeout(() => reject(event), 0);\n        });\n        socket!.addEventListener(\"close\", reject);\n        socket!.addEventListener(\n          \"message\",\n          (event: MessageEvent) => {\n            const message = JSON.parse(event.data);\n\n            if (!isValidSocketEvent(message)) {\n              return;\n            }\n\n            if (message.type === \"conversation_initiation_metadata\") {\n              resolve(message.conversation_initiation_metadata_event);\n            } else {\n              console.warn(\n                \"First received message is not conversation metadata.\"\n              );\n            }\n          },\n          { once: true }\n        );\n      });\n\n      const {\n        conversation_id,\n        agent_output_audio_format,\n        user_input_audio_format,\n      } = conversationConfig;\n\n      const inputFormat = parseFormat(user_input_audio_format ?? \"pcm_16000\");\n      const outputFormat = parseFormat(agent_output_audio_format);\n\n      return new Connection(socket, conversation_id, inputFormat, outputFormat);\n    } catch (error) {\n      socket?.close();\n      throw error;\n    }\n  }\n\n  private queue: IncomingSocketEvent[] = [];\n  private disconnectionDetails: DisconnectionDetails | null = null;\n  private onDisconnectCallback: OnDisconnectCallback | null = null;\n  private onMessageCallback: OnMessageCallback | null = null;\n\n  private constructor(\n    public readonly socket: WebSocket,\n    public readonly conversationId: string,\n    public readonly inputFormat: FormatConfig,\n    public readonly outputFormat: FormatConfig\n  ) {\n    this.socket.addEventListener(\"error\", event => {\n      // In case the error event is followed by a close event, we want the\n      // latter to be the one that disconnects the session as it contains more\n      // useful information.\n      setTimeout(\n        () =>\n          this.disconnect({\n            reason: \"error\",\n            message: \"The connection was closed due to a socket error.\",\n            context: event,\n          }),\n        0\n      );\n    });\n    this.socket.addEventListener(\"close\", event => {\n      this.disconnect(\n        event.code === 1000\n          ? {\n              reason: \"agent\",\n              context: event,\n            }\n          : {\n              reason: \"error\",\n              message:\n                event.reason || \"The connection was closed by the server.\",\n              context: event,\n            }\n      );\n    });\n    this.socket.addEventListener(\"message\", event => {\n      try {\n        const parsedEvent = JSON.parse(event.data);\n        if (!isValidSocketEvent(parsedEvent)) {\n          return;\n        }\n\n        if (this.onMessageCallback) {\n          this.onMessageCallback(parsedEvent);\n        } else {\n          this.queue.push(parsedEvent);\n        }\n      } catch (_) {}\n    });\n  }\n\n  public close() {\n    this.socket.close();\n  }\n\n  public sendMessage(message: OutgoingSocketEvent) {\n    this.socket.send(JSON.stringify(message));\n  }\n\n  public onMessage(callback: OnMessageCallback) {\n    this.onMessageCallback = callback;\n    this.queue.forEach(callback);\n    this.queue = [];\n  }\n\n  public onDisconnect(callback: OnDisconnectCallback) {\n    this.onDisconnectCallback = callback;\n    if (this.disconnectionDetails) {\n      callback(this.disconnectionDetails);\n    }\n  }\n\n  private disconnect(details: DisconnectionDetails) {\n    if (!this.disconnectionDetails) {\n      this.disconnectionDetails = details;\n      this.onDisconnectCallback?.(details);\n    }\n  }\n}\n\nfunction parseFormat(format: string): FormatConfig {\n  const [formatPart, sampleRatePart] = format.split(\"_\");\n  if (![\"pcm\", \"ulaw\"].includes(formatPart)) {\n    throw new Error(`Invalid format: ${format}`);\n  }\n\n  const sampleRate = parseInt(sampleRatePart);\n  if (isNaN(sampleRate)) {\n    throw new Error(`Invalid sample rate: ${sampleRatePart}`);\n  }\n\n  return {\n    format: formatPart as FormatConfig[\"format\"],\n    sampleRate,\n  };\n}\n","import { arrayBufferToBase64, base64ToArrayBuffer } from \"./utils/audio\";\nimport { Input, InputConfig } from \"./utils/input\";\nimport { Output } from \"./utils/output\";\nimport {\n  Connection,\n  DisconnectionDetails,\n  OnDisconnectCallback,\n  SessionConfig,\n} from \"./utils/connection\";\nimport { ClientToolCallEvent, IncomingSocketEvent } from \"./utils/events\";\nimport { isAndroidDevice, isIosDevice } from \"./utils/compatibility\";\n\nexport type { InputConfig } from \"./utils/input\";\nexport type { IncomingSocketEvent } from \"./utils/events\";\nexport type {\n  SessionConfig,\n  DisconnectionDetails,\n  Language,\n} from \"./utils/connection\";\nexport type Role = \"user\" | \"ai\";\nexport type Mode = \"speaking\" | \"listening\";\nexport type Status =\n  | \"connecting\"\n  | \"connected\"\n  | \"disconnecting\"\n  | \"disconnected\";\nexport type Options = SessionConfig &\n  Callbacks &\n  ClientToolsConfig &\n  InputConfig;\nexport type ClientToolsConfig = {\n  clientTools: Record<\n    string,\n    (\n      parameters: any\n    ) => Promise<string | number | void> | string | number | void\n  >;\n};\nexport type Callbacks = {\n  onConnect: (props: { conversationId: string }) => void;\n  // internal debug events, not to be used\n  onDebug: (props: any) => void;\n  onDisconnect: OnDisconnectCallback;\n  onError: (message: string, context?: any) => void;\n  onMessage: (props: { message: string; source: Role }) => void;\n  onAudio: (base64Audio: string) => void;\n  onModeChange: (prop: { mode: Mode }) => void;\n  onStatusChange: (prop: { status: Status }) => void;\n  onCanSendFeedbackChange: (prop: { canSendFeedback: boolean }) => void;\n  onUnhandledClientToolCall?: (\n    params: ClientToolCallEvent[\"client_tool_call\"]\n  ) => void;\n};\n\nconst defaultClientTools = { clientTools: {} };\nconst defaultCallbacks: Callbacks = {\n  onConnect: () => {},\n  onDebug: () => {},\n  onDisconnect: () => {},\n  onError: () => {},\n  onMessage: () => {},\n  onAudio: () => {},\n  onModeChange: () => {},\n  onStatusChange: () => {},\n  onCanSendFeedbackChange: () => {},\n};\n\nconst HTTPS_API_ORIGIN = \"https://api.elevenlabs.io\";\n\nexport class Conversation {\n  public static async startSession(\n    options: SessionConfig &\n      Partial<Callbacks> &\n      Partial<ClientToolsConfig> &\n      Partial<InputConfig>\n  ): Promise<Conversation> {\n    const fullOptions: Options = {\n      ...defaultClientTools,\n      ...defaultCallbacks,\n      ...options,\n    };\n\n    fullOptions.onStatusChange({ status: \"connecting\" });\n    fullOptions.onCanSendFeedbackChange({ canSendFeedback: false });\n\n    let input: Input | null = null;\n    let connection: Connection | null = null;\n    let output: Output | null = null;\n    let preliminaryInputStream: MediaStream | null = null;\n\n    let wakeLock: WakeLockSentinel | null = null;\n    if (options.useWakeLock ?? true) {\n      try {\n        wakeLock = await navigator.wakeLock.request(\"screen\");\n      } catch (e) {\n        // Wake Lock is not required for the conversation to work\n      }\n    }\n\n    try {\n      // some browsers won't allow calling getSupportedConstraints or enumerateDevices\n      // before getting approval for microphone access\n      preliminaryInputStream = await navigator.mediaDevices.getUserMedia({\n        audio: true,\n      });\n\n      const delayConfig = options.connectionDelay ?? {\n        default: 0,\n        // Give the Android AudioManager enough time to switch to the correct audio mode\n        android: 3_000,\n      };\n      let delay = delayConfig.default;\n      if (isAndroidDevice()) {\n        delay = delayConfig.android ?? delay;\n      } else if (isIosDevice()) {\n        delay = delayConfig.ios ?? delay;\n      }\n\n      if (delay > 0) {\n        await new Promise(resolve => setTimeout(resolve, delay));\n      }\n\n      connection = await Connection.create(options);\n      [input, output] = await Promise.all([\n        Input.create({\n          ...connection.inputFormat,\n          preferHeadphonesForIosDevices: options.preferHeadphonesForIosDevices,\n        }),\n        Output.create(connection.outputFormat),\n      ]);\n\n      preliminaryInputStream?.getTracks().forEach(track => track.stop());\n      preliminaryInputStream = null;\n\n      return new Conversation(fullOptions, connection, input, output, wakeLock);\n    } catch (error) {\n      fullOptions.onStatusChange({ status: \"disconnected\" });\n      preliminaryInputStream?.getTracks().forEach(track => track.stop());\n      connection?.close();\n      await input?.close();\n      await output?.close();\n      try {\n        await wakeLock?.release();\n        wakeLock = null;\n      } catch (e) {}\n      throw error;\n    }\n  }\n\n  private lastInterruptTimestamp: number = 0;\n  private mode: Mode = \"listening\";\n  private status: Status = \"connecting\";\n  private inputFrequencyData?: Uint8Array;\n  private outputFrequencyData?: Uint8Array;\n  private volume: number = 1;\n  private currentEventId: number = 1;\n  private lastFeedbackEventId: number = 1;\n  private canSendFeedback: boolean = false;\n\n  private constructor(\n    private readonly options: Options,\n    private readonly connection: Connection,\n    public readonly input: Input,\n    public readonly output: Output,\n    public wakeLock: WakeLockSentinel | null\n  ) {\n    this.options.onConnect({ conversationId: connection.conversationId });\n\n    this.connection.onDisconnect(this.endSessionWithDetails);\n    this.connection.onMessage(this.onMessage);\n\n    this.input.worklet.port.onmessage = this.onInputWorkletMessage;\n    this.output.worklet.port.onmessage = this.onOutputWorkletMessage;\n    this.updateStatus(\"connected\");\n  }\n\n  public endSession = () => this.endSessionWithDetails({ reason: \"user\" });\n\n  private endSessionWithDetails = async (details: DisconnectionDetails) => {\n    if (this.status !== \"connected\" && this.status !== \"connecting\") return;\n    this.updateStatus(\"disconnecting\");\n\n    try {\n      await this.wakeLock?.release();\n      this.wakeLock = null;\n    } catch (e) {}\n\n    this.connection.close();\n    await this.input.close();\n    await this.output.close();\n\n    this.updateStatus(\"disconnected\");\n    this.options.onDisconnect(details);\n  };\n\n  private updateMode = (mode: Mode) => {\n    if (mode !== this.mode) {\n      this.mode = mode;\n      this.options.onModeChange({ mode });\n    }\n  };\n\n  private updateStatus = (status: Status) => {\n    if (status !== this.status) {\n      this.status = status;\n      this.options.onStatusChange({ status });\n    }\n  };\n\n  private updateCanSendFeedback = () => {\n    const canSendFeedback = this.currentEventId !== this.lastFeedbackEventId;\n    if (this.canSendFeedback !== canSendFeedback) {\n      this.canSendFeedback = canSendFeedback;\n      this.options.onCanSendFeedbackChange({ canSendFeedback });\n    }\n  };\n\n  private onMessage = async (parsedEvent: IncomingSocketEvent) => {\n    switch (parsedEvent.type) {\n      case \"interruption\": {\n        if (parsedEvent.interruption_event) {\n          this.lastInterruptTimestamp = parsedEvent.interruption_event.event_id;\n        }\n        this.fadeOutAudio();\n        return;\n      }\n\n      case \"agent_response\": {\n        this.options.onMessage({\n          source: \"ai\",\n          message: parsedEvent.agent_response_event.agent_response,\n        });\n        return;\n      }\n\n      case \"user_transcript\": {\n        this.options.onMessage({\n          source: \"user\",\n          message: parsedEvent.user_transcription_event.user_transcript,\n        });\n        return;\n      }\n\n      case \"internal_tentative_agent_response\": {\n        this.options.onDebug({\n          type: \"tentative_agent_response\",\n          response:\n            parsedEvent.tentative_agent_response_internal_event\n              .tentative_agent_response,\n        });\n        return;\n      }\n\n      case \"client_tool_call\": {\n        if (\n          this.options.clientTools.hasOwnProperty(\n            parsedEvent.client_tool_call.tool_name\n          )\n        ) {\n          try {\n            const result =\n              (await this.options.clientTools[\n                parsedEvent.client_tool_call.tool_name\n              ](parsedEvent.client_tool_call.parameters)) ??\n              \"Client tool execution successful.\"; // default client-tool call response\n\n            // The API expects result to be a string, so we need to convert it if it's not already a string\n            const formattedResult =\n              typeof result === \"object\"\n                ? JSON.stringify(result)\n                : String(result);\n\n            this.connection.sendMessage({\n              type: \"client_tool_result\",\n              tool_call_id: parsedEvent.client_tool_call.tool_call_id,\n              result: formattedResult,\n              is_error: false,\n            });\n          } catch (e) {\n            this.onError(\n              \"Client tool execution failed with following error: \" +\n                (e as Error)?.message,\n              {\n                clientToolName: parsedEvent.client_tool_call.tool_name,\n              }\n            );\n            this.connection.sendMessage({\n              type: \"client_tool_result\",\n              tool_call_id: parsedEvent.client_tool_call.tool_call_id,\n              result: \"Client tool execution failed: \" + (e as Error)?.message,\n              is_error: true,\n            });\n          }\n        } else {\n          if (this.options.onUnhandledClientToolCall) {\n            this.options.onUnhandledClientToolCall(\n              parsedEvent.client_tool_call\n            );\n\n            return;\n          }\n\n          this.onError(\n            `Client tool with name ${parsedEvent.client_tool_call.tool_name} is not defined on client`,\n            {\n              clientToolName: parsedEvent.client_tool_call.tool_name,\n            }\n          );\n          this.connection.sendMessage({\n            type: \"client_tool_result\",\n            tool_call_id: parsedEvent.client_tool_call.tool_call_id,\n            result: `Client tool with name ${parsedEvent.client_tool_call.tool_name} is not defined on client`,\n            is_error: true,\n          });\n        }\n\n        return;\n      }\n\n      case \"audio\": {\n        if (this.lastInterruptTimestamp <= parsedEvent.audio_event.event_id) {\n          this.options.onAudio(parsedEvent.audio_event.audio_base_64);\n          this.addAudioBase64Chunk(parsedEvent.audio_event.audio_base_64);\n          this.currentEventId = parsedEvent.audio_event.event_id;\n          this.updateCanSendFeedback();\n          this.updateMode(\"speaking\");\n        }\n        return;\n      }\n\n      case \"ping\": {\n        this.connection.sendMessage({\n          type: \"pong\",\n          event_id: parsedEvent.ping_event.event_id,\n        });\n        // parsedEvent.ping_event.ping_ms can be used on client side, for example\n        // to warn if ping is too high that experience might be degraded.\n        return;\n      }\n\n      // unhandled events are expected to be internal events\n      default: {\n        this.options.onDebug(parsedEvent);\n        return;\n      }\n    }\n  };\n\n  private onInputWorkletMessage = (event: MessageEvent): void => {\n    const rawAudioPcmData = event.data[0];\n    const maxVolume = event.data[1];\n\n    // check if the sound was loud enough, so we don't send unnecessary chunks\n    // then forward audio to websocket\n    //if (maxVolume > 0.001) {\n    if (this.status === \"connected\") {\n      this.connection.sendMessage({\n        user_audio_chunk: arrayBufferToBase64(rawAudioPcmData.buffer),\n        //sample_rate: this.inputAudioContext?.inputSampleRate || this.inputSampleRate,\n      });\n    }\n    //}\n  };\n\n  private onOutputWorkletMessage = ({ data }: MessageEvent): void => {\n    if (data.type === \"process\") {\n      this.updateMode(data.finished ? \"listening\" : \"speaking\");\n    }\n  };\n\n  private addAudioBase64Chunk = (chunk: string) => {\n    this.output.gain.gain.value = this.volume;\n    this.output.worklet.port.postMessage({ type: \"clearInterrupted\" });\n    this.output.worklet.port.postMessage({\n      type: \"buffer\",\n      buffer: base64ToArrayBuffer(chunk),\n    });\n  };\n\n  private fadeOutAudio = () => {\n    // mute agent\n    this.updateMode(\"listening\");\n    this.output.worklet.port.postMessage({ type: \"interrupt\" });\n    this.output.gain.gain.exponentialRampToValueAtTime(\n      0.0001,\n      this.output.context.currentTime + 2\n    );\n\n    // reset volume back\n    setTimeout(() => {\n      this.output.gain.gain.value = this.volume;\n      this.output.worklet.port.postMessage({ type: \"clearInterrupted\" });\n    }, 2000); // Adjust the duration as needed\n  };\n\n  private onError = (message: string, context?: any) => {\n    console.error(message, context);\n    this.options.onError(message, context);\n  };\n\n  private calculateVolume = (frequencyData: Uint8Array) => {\n    if (frequencyData.length === 0) {\n      return 0;\n    }\n\n    // TODO: Currently this averages all frequencies, but we should probably\n    // bias towards the frequencies that are more typical for human voice\n    let volume = 0;\n    for (let i = 0; i < frequencyData.length; i++) {\n      volume += frequencyData[i] / 255;\n    }\n    volume /= frequencyData.length;\n\n    return volume < 0 ? 0 : volume > 1 ? 1 : volume;\n  };\n\n  public getId = () => this.connection.conversationId;\n\n  public isOpen = () => this.status === \"connected\";\n\n  public setVolume = ({ volume }: { volume: number }) => {\n    this.volume = volume;\n  };\n\n  public setMicMuted = (isMuted: boolean) => {\n    this.input.setMuted(isMuted);\n  };\n\n  public getInputByteFrequencyData = () => {\n    this.inputFrequencyData ??= new Uint8Array(\n      this.input.analyser.frequencyBinCount\n    );\n    this.input.analyser.getByteFrequencyData(this.inputFrequencyData);\n    return this.inputFrequencyData;\n  };\n\n  public getOutputByteFrequencyData = () => {\n    this.outputFrequencyData ??= new Uint8Array(\n      this.output.analyser.frequencyBinCount\n    );\n    this.output.analyser.getByteFrequencyData(this.outputFrequencyData);\n    return this.outputFrequencyData;\n  };\n\n  public getInputVolume = () => {\n    return this.calculateVolume(this.getInputByteFrequencyData());\n  };\n\n  public getOutputVolume = () => {\n    return this.calculateVolume(this.getOutputByteFrequencyData());\n  };\n\n  public sendFeedback = (like: boolean) => {\n    if (!this.canSendFeedback) {\n      console.warn(\n        this.lastFeedbackEventId === 0\n          ? \"Cannot send feedback: the conversation has not started yet.\"\n          : \"Cannot send feedback: feedback has already been sent for the current response.\"\n      );\n      return;\n    }\n\n    this.connection.sendMessage({\n      type: \"feedback\",\n      score: like ? \"like\" : \"dislike\",\n      event_id: this.currentEventId,\n    });\n    this.lastFeedbackEventId = this.currentEventId;\n    this.updateCanSendFeedback();\n  };\n\n  public sendContextualUpdate = (text: string) => {\n    this.connection.sendMessage({\n      type: \"contextual_update\",\n      text,\n    });\n  };\n}\n\nexport function postOverallFeedback(\n  conversationId: string,\n  like: boolean,\n  origin: string = HTTPS_API_ORIGIN\n) {\n  return fetch(`${origin}/v1/convai/conversations/${conversationId}/feedback`, {\n    method: \"POST\",\n    body: JSON.stringify({\n      feedback: like ? \"like\" : \"dislike\",\n    }),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });\n}\n","// Visualization module: canvas-based idle circle and reactive line driven by audio\n\nlet audioCtx = null;\nlet analyser = null;\nlet dataArray = null;\nlet rafId = null;\nlet canvas = null;\nlet ctx = null;\nlet vizMode = 'idle'; // 'idle' | 'line'\nlet silentGainNode = null;\nconst mediaSourceMap = new WeakMap(); // HTMLMediaElement -> MediaElementAudioSourceNode\nconst streamSourceMap = new WeakMap(); // MediaStream -> MediaStreamAudioSourceNode\nconst playingEls = new Set();\nlet activeConversation = null;\nlet lastSdkBins = null;\n\n// Debug helpers\nlet lastActive = false;\nlet silentFrames = 0;\nconst ACTIVE_THRESHOLD = 0.015; // RMS threshold\nconst SILENT_FRAME_LIMIT = 20; // ~0.33s at 60fps\n\nconst ensureAudioContext = async () => {\n  if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n  if (audioCtx.state === 'suspended') {\n    try { await audioCtx.resume(); } catch {}\n  }\n};\n\nexport const updateVisualizerMode = (mode) => {\n    if (mode !== vizMode) {\n        console.log('[viz] mode ->', mode);\n        vizMode = mode;\n    }\n};\n\nconst buildAnalyserChain = (sourceNode) => {\n  analyser = (audioCtx && audioCtx.createAnalyser) ? audioCtx.createAnalyser() : null;\n  if (!analyser) return;\n  analyser.fftSize = 2048;\n  dataArray = new Uint8Array(analyser.frequencyBinCount);\n  try { sourceNode.disconnect(); } catch {}\n  sourceNode.connect(analyser);\n  // Keep graph alive but silent\n  if (!silentGainNode) {\n    silentGainNode = audioCtx.createGain();\n    silentGainNode.gain.value = 0.0;\n    silentGainNode.connect(audioCtx.destination);\n  }\n  try { analyser.disconnect(); } catch {}\n  analyser.connect(silentGainNode);\n};\n\nexport const connectMediaEl = async (el) => {\n  if (!(el instanceof HTMLMediaElement)) return;\n  await ensureAudioContext();\n  let source = mediaSourceMap.get(el);\n  if (!source) {\n    try { source = audioCtx.createMediaElementSource(el); } catch (e) { console.warn('[viz] createMediaElementSource failed', e); }\n    if (source) mediaSourceMap.set(el, source);\n  }\n  if (source) buildAnalyserChain(source);\n  try { el.crossOrigin = 'anonymous'; } catch {}\n  console.log('[viz] MediaElement connected', { src: el.currentSrc || el.src });\n  \n  // Track play/pause events to control visualization\n  el.addEventListener('play', () => {\n    playingEls.add(el);\n    updateVisualizerMode('line');\n    console.log('[viz] element play');\n  });\n  const onStop = () => {\n    playingEls.delete(el);\n    if (playingEls.size === 0) updateVisualizerMode('idle');\n    console.log('[viz] element stop/pause, playing count:', playingEls.size);\n  };\n  el.addEventListener('pause', onStop);\n  el.addEventListener('ended', onStop);\n};\n\nexport const connectMediaStream = async (stream) => {\n  if (!(stream instanceof MediaStream)) return;\n  await ensureAudioContext();\n  let source = streamSourceMap.get(stream);\n  if (!source) {\n    try { source = audioCtx.createMediaStreamSource(stream); } catch (e) { console.warn('[viz] createMediaStreamSource failed', e); }\n    if (source) streamSourceMap.set(stream, source);\n  }\n  if (source) buildAnalyserChain(source);\n  updateVisualizerMode('line');\n  console.log('[viz] MediaStream connected with tracks:', stream.getTracks().map(t => t.kind + ':' + t.readyState));\n  stream.getTracks().forEach(t => t.addEventListener('ended', () => {\n    if (stream.getTracks().every(tr => tr.readyState === 'ended')) {\n      updateVisualizerMode('idle');\n      console.log('[viz] stream ended');\n    }\n  }));\n};\n\nexport const observeMediaPlayback = () => {\n  const handler = async (type, target) => {\n    if (!(target instanceof HTMLMediaElement)) return;\n    if (type === 'play') {\n      await connectMediaEl(target);\n      playingEls.add(target);\n      updateVisualizerMode('line');\n      console.log('[viz] global play', target.tagName);\n    } else {\n      playingEls.delete(target);\n      if (playingEls.size === 0) updateVisualizerMode('idle');\n      console.log('[viz] global', type, 'playing count:', playingEls.size);\n    }\n  };\n  document.addEventListener('play', (e) => handler('play', e.target), true);\n  document.addEventListener('pause', (e) => handler('pause', e.target), true);\n  document.addEventListener('ended', (e) => handler('ended', e.target), true);\n};\n\nexport const hookConversationAudio = async (conv) => {\n  try {\n    if (!conv) return;\n    // Try element\n    const el = conv.audioElement || conv.audioEl || conv.audio;\n    if (el instanceof HTMLMediaElement) {\n      await connectMediaEl(el);\n      return;\n    }\n    // Try stream\n    const stream = conv.mediaStream || conv.outputStream || conv.remoteStream || conv.stream;\n    if (stream instanceof MediaStream) {\n      await connectMediaStream(stream);\n      return;\n    }\n    // Fallback: observe DOM for media created later\n    const mo = new MutationObserver((muts) => {\n      muts.forEach((mut) => {\n        mut.addedNodes?.forEach((n) => {\n          if (n instanceof HTMLMediaElement) connectMediaEl(n);\n          if (n.querySelectorAll) n.querySelectorAll('audio,video').forEach(connectMediaEl);\n        });\n      });\n    });\n    mo.observe(document.documentElement, { childList: true, subtree: true });\n  } catch (e) {\n    console.warn('[viz] hookConversationAudio failed', e);\n  }\n};\n\nexport const setActiveConversation = (conv) => {\n  activeConversation = conv;\n};\n\nconst initCanvas = (canvasId) => {\n  canvas = document.getElementById(canvasId);\n  if (!canvas) return;\n  ctx = canvas.getContext('2d');\n  const resize = () => {\n    const dpr = window.devicePixelRatio || 1;\n    const w = canvas.clientWidth || window.innerWidth;\n    const h = canvas.clientHeight || window.innerHeight;\n    canvas.width = Math.floor(w * dpr);\n    canvas.height = Math.floor(h * dpr);\n    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n  };\n  resize();\n  window.addEventListener('resize', resize);\n};\n\nconst drawIdle = (tSec) => {\n  if (!ctx || !canvas) return;\n  const w = canvas.clientWidth;\n  const h = canvas.clientHeight;\n  ctx.clearRect(0, 0, w, h);\n  const cx = w / 2;\n  const cy = h / 2;\n  const base = Math.min(w, h) * 0.12;\n  const r = base * (1 + 0.06 * Math.sin(tSec * 2 * Math.PI * 0.9));\n  ctx.shadowColor = '#00ff80';\n  ctx.shadowBlur = 20;\n  ctx.strokeStyle = '#00ff80';\n  ctx.lineWidth = 3;\n  ctx.beginPath();\n  ctx.arc(cx, cy, r, 0, Math.PI * 2);\n  ctx.stroke();\n};\n\nconst drawLine = () => {\n  if (!ctx || !canvas) return;\n  const w = canvas.clientWidth;\n  const h = canvas.clientHeight;\n  ctx.clearRect(0, 0, w, h);\n  ctx.beginPath();\n  ctx.lineWidth = 3;\n  ctx.strokeStyle = '#00ff80';\n  ctx.shadowColor = '#00ff80';\n  ctx.shadowBlur = 16;\n  const midY = Math.floor(h / 2);\n\n  let rms = 0;\n  if (analyser && dataArray) {\n    analyser.getByteTimeDomainData(dataArray);\n    // Remove DC offset to keep center exactly at midY\n    let mean = 0;\n    for (let i = 0; i < dataArray.length; i++) mean += dataArray[i];\n    mean /= dataArray.length; // around 128, but measured live\n    const step = w / dataArray.length;\n    let sum = 0;\n    for (let i = 0; i < dataArray.length; i++) {\n      const centered = (dataArray[i] - mean) / 128; // now ~-1..1 around 0\n      const x = i * step;\n      const y = midY + centered * (h * 0.22);\n      if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);\n      sum += centered * centered;\n    }\n    rms = Math.sqrt(sum / dataArray.length);\n  } else if (activeConversation?.getOutputByteFrequencyData) {\n    try {\n      const res = activeConversation.getOutputByteFrequencyData();\n      if (res && typeof res.then === 'function') {\n        res.then((bins) => { lastSdkBins = bins; }).catch(() => {});\n      } else if (res instanceof Uint8Array) {\n        lastSdkBins = res;\n      }\n    } catch {}\n\n    const bins = lastSdkBins;\n    const len = bins?.length || 0;\n    if (len > 0) {\n      // Center bins by subtracting their average so graph oscillates equally\n      let avg = 0;\n      for (let i = 0; i < len; i++) avg += bins[i];\n      avg /= len || 1;\n      const step = w / len;\n      let sum = 0;\n      for (let i = 0; i < len; i++) {\n        const centered = (bins[i] - avg) / 255; // roughly -0.5..0.5\n        const x = i * step;\n        const y = midY + centered * 2 * (h * 0.22); // scale to ~-1..1\n        if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);\n        sum += centered * centered;\n      }\n      rms = Math.sqrt(sum / len) / 1.1; // rough normalization\n    }\n  }\n\n  // Debug: log when audio starts/stops\n  const isActive = rms > ACTIVE_THRESHOLD;\n  if (isActive && !lastActive) {\n    console.log('[viz] audio signal detected, rms=', rms.toFixed(3));\n  }\n  if (!isActive) {\n    silentFrames++;\n    if (lastActive && silentFrames > SILENT_FRAME_LIMIT) {\n      console.log('[viz] audio gone silent');\n    }\n  } else {\n    silentFrames = 0;\n  }\n  lastActive = isActive;\n\n  ctx.stroke();\n};\n\nexport const initFullVisualizer = (canvasId = 'vizCanvas') => {\n  initCanvas(canvasId);\n  cancelAnimationFrame(rafId);\n  const tick = (tMs) => {\n    const tSec = tMs / 1000;\n    if (vizMode === 'line') drawLine(); else drawIdle(tSec);\n    rafId = requestAnimationFrame(tick);\n  };\n  rafId = requestAnimationFrame(tick);\n};\n"],"names":["$ee5c819c8591c8f0$var$e","Object","assign","bind","e","n","arguments","length","t","o","hasOwnProperty","call","apply","$ee5c819c8591c8f0$var$t","Blob","type","$ee5c819c8591c8f0$var$o","URL","createObjectURL","$ee5c819c8591c8f0$var$r","includes","navigator","platform","userAgent","document","$ee5c819c8591c8f0$var$i","context","analyser","worklet","inputStream","create","sampleRate","i","format","a","preferHeadphonesForIosDevices","s","u","Promise","resolve","c","l","audioWorklet","addModule","then","mediaDevices","getUserMedia","audio","createMediaStreamSource","r","AudioWorkletNode","port","postMessage","connect","resume","getSupportedConstraints","window","AudioContext","createAnalyser","ideal","echoCancellation","noiseSuppression","enumerateDevices","find","kind","label","toLowerCase","deviceId","getTracks","forEach","stop","close","reject","prototype","setMuted","isMuted","$ee5c819c8591c8f0$var$a","$ee5c819c8591c8f0$var$s","$ee5c819c8591c8f0$var$u","gain","createGain","destination","$ee5c819c8591c8f0$var$l","socket","conversationId","inputFormat","outputFormat","queue","disconnectionDetails","onDisconnectCallback","onMessageCallback","addEventListener","setTimeout","disconnect","reason","message","code","JSON","parse","data","push","origin","signedUrl","agentId","authorization","WebSocket","overrides","conversation_config_override","agent","prompt","first_message","firstMessage","language","tts","voice_id","voiceId","customLlmExtraBody","custom_llm_extra_body","dynamicVariables","dynamic_variables","send","stringify","once","$ee5c819c8591c8f0$var$c","conversation_initiation_metadata_event","console","warn","conversation_id","agent_output_audio_format","user_input_audio_format","$ee5c819c8591c8f0$var$d","sendMessage","onMessage","onDisconnect","split","Error","parseInt","isNaN","$ee5c819c8591c8f0$var$h","$ee5c819c8591c8f0$var$p","clientTools","$ee5c819c8591c8f0$var$f","onConnect","onDebug","onError","onAudio","onModeChange","onStatusChange","onCanSendFeedbackChange","$ee5c819c8591c8f0$export$8e86b22308382a1","options","connection","input","output","wakeLock","lastInterruptTimestamp","mode","status","inputFrequencyData","outputFrequencyData","volume","currentEventId","lastFeedbackEventId","canSendFeedback","endSession","endSessionWithDetails","updateStatus","release","updateMode","updateCanSendFeedback","interruption_event","event_id","fadeOutAudio","source","agent_response_event","agent_response","user_transcription_event","user_transcript","response","tentative_agent_response_internal_event","tentative_agent_response","client_tool_call","tool_name","parameters","String","tool_call_id","result","is_error","clientToolName","onUnhandledClientToolCall","audio_event","audio_base_64","addAudioBase64Chunk","ping_event","onInputWorkletMessage","user_audio_chunk","Uint8Array","buffer","btoa","fromCharCode","onOutputWorkletMessage","finished","value","$ee5c819c8591c8f0$var$n","atob","charCodeAt","exponentialRampToValueAtTime","currentTime","error","calculateVolume","getId","isOpen","setVolume","setMicMuted","getInputByteFrequencyData","frequencyBinCount","getByteFrequencyData","getOutputByteFrequencyData","getInputVolume","getOutputVolume","sendFeedback","score","sendContextualUpdate","text","onmessage","startSession","p","all","d","m","v","_","h","f","g","connectionDelay","default","android","y","test","ios","b","useWakeLock","request","$812c95b36586ff42$var$audioCtx","$812c95b36586ff42$var$analyser","$812c95b36586ff42$var$dataArray","$812c95b36586ff42$var$rafId","$812c95b36586ff42$var$canvas","$812c95b36586ff42$var$ctx","$812c95b36586ff42$var$vizMode","$812c95b36586ff42$var$silentGainNode","$812c95b36586ff42$var$mediaSourceMap","WeakMap","$812c95b36586ff42$var$streamSourceMap","$812c95b36586ff42$var$playingEls","Set","$812c95b36586ff42$var$activeConversation","$812c95b36586ff42$var$lastSdkBins","$812c95b36586ff42$var$lastActive","$812c95b36586ff42$var$silentFrames","$812c95b36586ff42$var$ensureAudioContext","webkitAudioContext","state","$812c95b36586ff42$export$7df4508c5acf21ae","log","$812c95b36586ff42$var$buildAnalyserChain","sourceNode","fftSize","$812c95b36586ff42$export$f3feba0435d608ff","el","HTMLMediaElement","get","createMediaElementSource","set","crossOrigin","src","currentSrc","add","onStop","delete","size","$812c95b36586ff42$export$b62ab7b01fb852c0","stream","MediaStream","map","readyState","every","tr","$812c95b36586ff42$export$49b7f52cc38c934a","conv","audioElement","audioEl","mediaStream","outputStream","remoteStream","mo","MutationObserver","muts","mut","addedNodes","querySelectorAll","observe","documentElement","childList","subtree","$812c95b36586ff42$export$84cc0adba6eaa4c6","$812c95b36586ff42$var$initCanvas","canvasId","getElementById","getContext","resize","dpr","devicePixelRatio","w","clientWidth","innerWidth","clientHeight","innerHeight","width","Math","floor","height","setTransform","$812c95b36586ff42$var$drawIdle","tSec","clearRect","base","min","sin","PI","shadowColor","shadowBlur","strokeStyle","lineWidth","beginPath","arc","stroke","$812c95b36586ff42$var$drawLine","midY","rms","getByteTimeDomainData","mean","step","sum","centered","x","moveTo","lineTo","sqrt","res","bins","catch","len","avg","isActive","toFixed","$dad545c909cfec2d$var$startBtn","$dad545c909cfec2d$var$stopBtn","$dad545c909cfec2d$var$statusEl","$dad545c909cfec2d$var$conversationInstance","$dad545c909cfec2d$var$audio","$dad545c909cfec2d$var$urlParams","URLSearchParams","location","search","$dad545c909cfec2d$var$config","name","$dad545c909cfec2d$var$loadConfig","fetch","ok","statusText","json","textContent","startBtn","disabled","innerText","$dad545c909cfec2d$var$setupFullModeBackground","backgroundImage","fullModeEl","style","setProperty","classList","$dad545c909cfec2d$var$updateStatus","$dad545c909cfec2d$var$startConversation","startAudio","remove","Audio","play","onended","$dad545c909cfec2d$var$endConversation","pause","$dad545c909cfec2d$var$cardEl","$dad545c909cfec2d$var$fullModeEl","cancelAnimationFrame","tick","tMs","requestAnimationFrame","handler","target","tagName","base64ToArrayBuffer","base64","binaryString","bytes","blob","rawAudioProcessor","isIosDevice","Input","this","_ref","_temp4","_temp2","_navigator$mediaDevic","supportsSampleRateConstraint","_temp","_temp3","availableDevices","idealDevice","keyword","_catch","_inputStream","_context","track","_proto","audioConcatProcessor","Output","isValidSocketEvent","event","Connection","_this","parsedEvent","config","_config$origin","url","protocols","_socket","_config$overrides$age","_config$overrides$age2","_config$overrides$age3","_config$overrides$tts","overridesEvent","conversationConfig","parseFormat","_socket2","callback","details","_this$onDisconnectCal","_format$split","formatPart","sampleRatePart","defaultClientTools","defaultCallbacks","Conversation","_this2","_this3","_this2$wakeLock","formattedResult","chunk","frequencyData","_ref2","_this$outputFrequency","like","_temp10","_options$connectionDe","_temp6","_Connection$create","_extends","_Promise$all","_preliminaryInputStre","preliminaryInputStream","fullOptions","_delayConfig$android","delayConfig","delay","_delayConfig$ios","_temp5","_preliminaryInputStre2","_connection","_input","_output","_temp8","_temp7","_wakeLock","_temp9","_options$useWakeLock","_navigator$wakeLock$r","postOverallFeedback","method","body","feedback","headers"],"version":3,"file":"arapy-11labs.33e29f00.js.map","sourceRoot":"/__parcel_source_root/"}